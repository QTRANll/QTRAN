## 测试数据
1. 先选择output1，mariadb转mysql，选取500对（sql，sqlsim）

## 测试参数设置
temperature = 0.1
1. 500条，error_iteration=False，sqls_type="origin"，FewShot=False  
2. 500条，error_iteration=False，sqls_type="simple"，FewShot=False  
3. 500条，error_iteration=False，sqls_type="origin"，FewShot=True
4. 500条，error_iteration=True，sqls_type="origin"，FewShot=False 
5. 500条，error_iteration=True，sqls_type="simple"，FewShot=True 

## 评估指标

1. 单次转换执行成功率：单次转换(未错误迭代)执行成功/总样本 + 错误迭代/总样本 = 1
2. 错误迭代执行成功率：错误迭代执行成功/错误迭代
3. 执行成功率：执行成功/总样本
4. 执行结果一致率：执行结果一致/执行成功，执行结果一致/总样本
5. 不同sql语句长度区间的成功率：区间有[1,400 ),[400,800),[800,1200),[1200,1600),[1600,+)

## 评估结论
1. 执行成功率：主要受sql长度和错误迭代影响
2. 执行结果一致率：主要受few-shot影响

|                                                        | 单次转换执行成功率       | 错误迭代执行成功率      | 执行成功率           | 执行结果一致率（执行成功）   | 执行结果一致率（总样本）    |
| ------------------------------------------------------ | --------------- | -------------- | --------------- | --------------- | --------------- |
| error_iteration=False，sqls_type="origin"，FewShot=False | 0.584 (292/500) | /              | 0.584 (292/500) | 0.469 (137/292) | 0.274 (137/500) |
| error_iteration=False，sqls_type="simple"，FewShot=False | 0.784 (392/500) | /              | 0.784 (392/500) | 0.487 (191/392) | 0.382 (191/500) |
| error_iteration=False，sqls_type="origin"，FewShot=True  | 0.612 (306/500) | /              | 0.612 (306/500) | 0.546 (167/306) | 0.334 (167/500) |
| error_iteration=True，sqls_type="origin"，FewShot=False  | 0.576 (288/500) | 0.307 (65/212) | 0.706 (353/500) | 0.414 (146/353) | 0.292 (146/500) |
| error_iteration=True，sqls_type="simple"，FewShot=True   | 0.76 (380/500)  | 0.433 (52/120) | 0.864 (432/500) | 0.546 (236/432) | 0.472 (236/500) |
|                                                        |                 |                |                 |                 |                 |


| error_iteration=False，sqls_type="origin"，FewShot=False | 单次转换执行成功率      | 错误迭代执行成功率 | 执行成功率          | 执行结果一致率（执行成功）     | 执行结果一致率（总样本）   |
| ------------------------------------------------------ | -------------- | --------- | -------------- | ----------------- | -------------- |
| [1,400 )                                               | 0.682 (15/22)  | /         | 0.682 (15/22)  | 0.733     (11/15) | 0.5 (11/22)    |
| [400,800)                                              | 0.680 (70/103) | /         | 0.680 (70/103) | 0.443     (31/70) | 0.301 (31/103) |
| [800,1200)                                             | 0.556 (69/124) | /         | 0.556 (69/124) | 0.507     (35/69) | 0.282 (35/124) |
| [1200,1600)                                            | 0.571 (72/126) | /         | 0.571 (72/126) | 0.389     (28/72) | 0.222 (28/126) |
| [1600,+)                                               | 0.528 (66/125) | /         | 0.528 (66/125) | 0.485 (32/66)     | 0.256 (32/125) |


| error_iteration=False，sqls_type="simple"，FewShot=False | 单次转换执行成功率       | 错误迭代执行成功率 | 执行成功率           | 执行结果一致率（执行成功）   | 执行结果一致率（总样本）    |
| ------------------------------------------------------ | --------------- | --------- | --------------- | --------------- | --------------- |
| [1,400 )                                               | 0.732 (41/56)   | /         | 0.732 (41/56)   | 0.756 (31/41)   | 0.554 (31/56)   |
| [400,800)                                              | 0.812 (216/266) | /         | 0.812 (216/266) | 0.477 (103/216) | 0.387 (103/266) |
| [800,1200)                                             | 0.771 (91/118)  | /         | 0.771 (91/118)  | 0.418 (38/91)   | 0.322 (38/118)  |
| [1200,1600)                                            | 0.756 (34/45)   | /         | 0.756 (34/45)   | 0.500 (17/34)   | 0.378 (17/45)   |
| [1600,+)                                               | 0.667 (10/15)   | /         | 0.667 (10/15)   | 0.200   (2/10)  | 0.133  (2/15)   |


| error_iteration=False，sqls_type="origin"，FewShot=True | 单次转换执行成功率      | 错误迭代执行成功率 | 执行成功率          | 执行结果一致率（执行成功） | 执行结果一致率（总样本）   |
| ----------------------------------------------------- | -------------- | --------- | -------------- | ------------- | -------------- |
| [1,400 )                                              | 0.818 (18/22)  | /         | 0.818 (18/22)  | 0.944 (17/18) | 0.773 (17/22)  |
| [400,800)                                             | 0.864 (89/103) | /         | 0.864 (89/103) | 0.517 (46/89) | 0.447 (46/103) |
| [800,1200)                                            | 0.694 (86/124) | /         | 0.694 (86/124) | 0.558 (48/86) | 0.387 (48/124) |
| [1200,1600)                                           | 0.508 (64/126) | /         | 0.508 (64/126) | 0.531 (34/64) | 0.270 (34/126) |
| [1600,+)                                              | 0.392 (49/125) | /         | 0.392 (49/125) | 0.449 (22/49) | 0.176 (22/125) |


| error_iteration=True，sqls_type="origin"，FewShot=False | 单次转换执行成功率      | 错误迭代执行成功率     | 执行成功率          | 执行结果一致率（执行成功） | 执行结果一致率（总样本）   |
| ----------------------------------------------------- | -------------- | ------------- | -------------- | ------------- | -------------- |
| [1,400 )                                              | 0.727 (16/22)  | 0.500 (3/6)   | 0.864 (19/22)  | 0.684 (13/19) | 0.591 (13/22)  |
| [400,800)                                             | 0.660 (68/103) | 0.371 (13/35) | 0.786 (81/103) | 0.420 (34/81) | 0.330 (34/103) |
| [800,1200)                                            | 0.573 (71/124) | 0.358 (19/53) | 0.726 (90/124) | 0.411 (37/90) | 0.298 (37/124) |
| [1200,1600)                                           | 0.563 (71/126) | 0.236 (13/55) | 0.667 (84/126) | 0.345 (29/84) | 0.230 (29/126) |
| [1600,+)                                              | 0.496 (62/125) | 0.270 (17/63) | 0.632 (79/125) | 0.418 (33/79) | 0.264 (33/125) |

| error_iteration=True，sqls_type="simple"，FewShot=True | 单次转换执行成功率       | 错误迭代执行成功率     | 执行成功率           | 执行结果一致率（执行成功）   | 执行结果一致率（总样本）    |
| ---------------------------------------------------- | --------------- | ------------- | --------------- | --------------- | --------------- |
| [1,400 )                                             | 0.857 (48/56)   | 1.000 (8/8)   | 1.000 (56/56)   | 0.768 (43/56)   | 0.768 (43/56)   |
| [400,800)                                            | 0.876 (233/266) | 0.697 (23/33) | 0.962 (256/266) | 0.543 (139/256) | 0.523 (139/266) |
| [800,1200)                                           | 0.669 (79/118)  | 0.436 (17/39) | 0.814 (96/118)  | 0.458 (44/96)   | 0.373 (44/118)  |
| [1200,1600)                                          | 0.333 (15/45)   | 0.100 (3/30)  | 0.400 (18/45)   | 0.556 (10/18)   | 0.222 (10/45)   |
| [1600,+)                                             | 0.333 (5/15)    | 0.100 (1/10)  | 0.400 (6/15)    | 0.000 (0/6)     | 0.000 (0/15)    |


fewshot_output1_mariadb_to_mysql_1_240_originalSql_all.json",Ranges)
单次转换(未错误迭代)执行成功/总样本：0.990 (100/101)
执行成功/总样本：0.990 (100/101)
执行结果一致/执行成功：0.950 (95/100)
执行结果一致/总样本：0.941 (95/101)


fewshot_output1_mariadb_to_mysql_240_260_originalSql_all.json",Ranges)
单次转换(未错误迭代)执行成功/总样本：0.980 (145/148)
执行成功/总样本：0.980 (145/148)
执行结果一致/执行成功：0.897 (130/145)
执行结果一致/总样本：0.878 (130/148)




