{
    "HTML": [
        "https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000001054315"
    ],
    "Title": [
        "ALTER TABLEGROUP"
    ],
    "Feature": [
        "ALTER TABLEGROUP tablegroup_name ADD [TABLE] table_name [, table_name...];\nALTER TABLEGROUP tablegroup_name tablegroup_option;\n\ntablegroup_option:\n    SHARDING = 'NONE' | 'PARTITION' | 'ADAPTIVE'\n"
    ],
    "Description": [
        "该语句用于对一个表组增加多张表和修改表组的属性。",
        "\n\n\n参数\n描述\n\n\n\n\ntablegroup_name\n表组名称。对一个表组增加多张表时，表与表之间以逗号（‘,’）分隔。当添加多个表时，允许表名重复。如果待添加的表已经属于待加入的表组，OceanBase 数据库不会报错。\n\n\nSHARDING\n表组的属性。如果不指定 SHARDING 属性，则默认创建 ADAPTIVE 的表组。SHARDING 取值如下： \n      \nNONE：对加入表组的表没有限制。\nPARTITION：加入表组的表对应的一级分区，需要与表组中所有表的一级分区的分区方式一致，包括分区类型、分区个数和分区 Value。\nADAPTIVE：加入表组的表对应的一级分区和二级分区，需要与表组中所有表的一级分区和二级分区的分区方式一致，包括分区类型、分区个数和分区 Value。\n相同的分区方式包括： \n      \n分区类型相同（例如都是 Hash+Range 分区）。\n如果是 Hash 分区，要求引用的列数相同，并且分区个数相同。\n如果是 Range 分区，要求引用的列数相同，并且分区数相同，Range 分割点相同。\n对于二级分区，根据其分区类型，要求和上述一致。\n\n\n"
    ],
    "Examples": [
        "obclient> CREATE TABLEGROUP tblgroup1 SHARDING = 'NONE';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1(col1 NUMBER,col2 VARCHAR2(50))\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST (col2)\n      SUBPARTITION TEMPLATE\n      (SUBPARTITION mp0 VALUES ('01'),\n       SUBPARTITION mp1 VALUES ('02'),\n       SUBPARTITION mp2 VALUES ('03')\n       )\n      (PARTITION p0 VALUES('01'),\n       PARTITION p1 VALUES('02')\n      );\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2(col1 NUMBER,col2 VARCHAR2(50)) TABLEGROUP = tblgroup1\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST(col2)\n      SUBPARTITION TEMPLATE\n      (SUBPARTITION mp0 VALUES('01'),\n       SUBPARTITION mp1 VALUES('02'),\n       SUBPARTITION mp2 VALUES('03')\n      )\n      (PARTITION p0 VALUES('01'),\n       PARTITION p1 VALUES('02')\n      );\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLEGROUP tblgroup1 ADD tbl1,tbl2;\nQuery OK, 0 rows affected\n",
        "obclient> ALTER TABLEGROUP tblgroup1 SHARDING = 'PARTITION';\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLEGROUP tblgroup1 SHARDING = 'ADAPTIVE';\nQuery OK, 0 rows affected\n",
        "obclient> CREATE TABLEGROUP tblgroup2 SHARDING = 'NONE';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1 (col INT);\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2(col1 NUMBER,col2 VARCHAR2(50)) TABLEGROUP = tblgroup2\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST(col2)\n      SUBPARTITION TEMPLATE\n      (SUBPARTITION mp0 VALUES('01'),\n       SUBPARTITION mp1 VALUES('02'),\n       SUBPARTITION mp2 VALUES('03')\n      )\n      (PARTITION p0 VALUES('01'),\n       PARTITION p1 VALUES('02')\n      );\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLEGROUP tblgroup2 ADD tbl1,tbl2;\nQuery OK, 0 rows affected\n",
        "obclient> ALTER TABLEGROUP tblgroup2 SHARDING = 'PARTITION';\nORA-00600: internal error code, arguments: -4179, not all tables are non-partitioned or partitioned, modify tablegroup sharding attribute not allowed\n\nobclient> ALTER TABLEGROUP tblgroup2 SHARDING = 'ADAPTIVE';\nORA-00600: internal error code, arguments: -4179, not all tables are non-partitioned or partitioned, modify tablegroup sharding attribute not allowed\n",
        "obclient> CREATE TABLEGROUP tblgroup3 SHARDING = 'NONE';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1(col1 NUMBER,col2 VARCHAR2(50))\n   PARTITION BY LIST(col1) SUBPARTITION BY LIST (col2)\n     SUBPARTITION TEMPLATE\n     (SUBPARTITION mp0 VALUES ('01'),\n      SUBPARTITION mp1 VALUES ('02')\n      )\n     (PARTITION p0 VALUES('01'),\n      PARTITION p1 VALUES('02')\n     );\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2(col1 NUMBER,col2 VARCHAR2(50))\n   PARTITION BY LIST(col1) SUBPARTITION BY LIST(col2)\n     SUBPARTITION TEMPLATE\n     (SUBPARTITION mp0 VALUES('01'),\n      SUBPARTITION mp1 VALUES('02'),\n      SUBPARTITION mp2 VALUES('03')\n     )\n     (PARTITION p0 VALUES('01'),\n      PARTITION p1 VALUES('02')\n     );\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLEGROUP tblgroup3 ADD tbl1,tbl2;\nQuery OK, 0 rows affected\n",
        "obclient> ALTER TABLEGROUP tblgroup3 SHARDING = 'PARTITION';\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLEGROUP tblgroup3 SHARDING = 'ADAPTIVE';\nORA-00600: internal error code, arguments: -4179, subpartition num not matched, modify tablegroup sharding attribute not allowed\n",
        "obclient> CREATE TABLEGROUP tblgroup4 SHARDING = 'ADAPTIVE';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1(col1 int,col2 int)\n    PARTITION BY RANGE(col1) SUBPARTITION BY RANGE(col2)\n      SUBPARTITION TEMPLATE\n        (SUBPARTITION mp0 VALUES LESS THAN(2021),\n         SUBPARTITION mp1 VALUES LESS THAN(2022),\n         SUBPARTITION mp2 VALUES LESS THAN(2023)\n        )\n        (PARTITION p0 VALUES LESS THAN(100),\n         PARTITION p1 VALUES LESS THAN(200)\n        );\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2(col1 int,col2 int)\n    PARTITION BY RANGE(col1) SUBPARTITION BY RANGE(col2)\n      SUBPARTITION TEMPLATE\n       (SUBPARTITION mp0 VALUES LESS THAN(2021),\n        SUBPARTITION mp1 VALUES LESS THAN(2022),\n        SUBPARTITION mp2 VALUES LESS THAN(2023)\n       )\n      (PARTITION p0 VALUES LESS THAN(100),\n       PARTITION p1 VALUES LESS THAN(200)\n      );\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLEGROUP tblgroup4 ADD tbl1,tbl2;\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLE tbl1 ADD PARTITION p3 VALUES LESS THAN(400), PARTITION p4 VALUES LESS THAN(500);\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLE tbl2 DROP SUBPARTITION p0smp0,p0smp1;\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl3(col1 int,col2 int)\n    PARTITION BY RANGE(col1) SUBPARTITION BY RANGE(col2)\n      SUBPARTITION TEMPLATE\n     (SUBPARTITION mp0 VALUES LESS THAN(2021),\n      SUBPARTITION mp1 VALUES LESS THAN(2022),\n      SUBPARTITION mp2 VALUES LESS THAN(2023)\n     )\n     (PARTITION p0 VALUES LESS THAN(100),\n      PARTITION p1 VALUES LESS THAN(200)\n      );\nQuery OK, 0 rows affected\n\nobclient> ALTER TABLEGROUP tblgroup4 ADD tbl3;\nORA-00600: internal error code, arguments: -4179, partition num not equal, add table to tablegroup not allowed\n"
    ],
    "Category": [
        "DDL"
    ]
}