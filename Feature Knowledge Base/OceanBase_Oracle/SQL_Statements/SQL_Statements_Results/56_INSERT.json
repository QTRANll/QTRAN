{
    "HTML": [
        "https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000001054289"
    ],
    "Title": [
        "INSERT"
    ],
    "Feature": [
        "INSERT [hint_options] { single_table_insert | multi_table_insert | overwrite_table_insert};\n\nsingle_table_insert:\n    { INTO insert_table_clause opt_nologging '(' column_list ')' values_clause [{ RETURNING | RETURN } returning_exprs [into_clause]]\n    | INTO insert_table_clause opt_nologging '(' ')' values_clause [{ RETURNING | RETURN } returning_exprs [into_clause]]\n    | INTO insert_table_clause opt_nologging values_clause [{ RETURNING | RETURN } returning_exprs [into_clause]]\n    }\n\nopt_nologging:\n    { NOLOGGING | /*EMPTY*/ }\n\nreturning_exprs:\n    projection_col_name [,projection_col_name ...]\n\ninsert_into_clause:\n    { INTO into_var_list | BULK COLLECT INTO into_var_list}\n\ninto_var_list:\n    { USER_VARIABLE | ref_name } [, { USER_VARIABLE | ref_name }...]\n\nvalues_clause:\n    VALUES ({ expr | DEFAULT } [, { expr | DEFAULT } ]...  )\n\nmulti_table_insert:\n    { ALL { insert_into_clause [ values_clause ] [error_logging_clause] }\n    | conditional_insert_clause\n    } subquery\n\nconditional_insert_clause:\n    [ ALL | FIRST ]\n    WHEN condition\n    THEN insert_into_clause\n    [ values_clause ]\n    [ error_logging_clause ]\n    [ insert_into_clause [ values_clause ] [ error_logging_clause ] ]...\n    [ WHEN condition\n        THEN insert_into_clause\n        [ values_clause ]\n        [ error_logging_clause ]\n        [ insert_into_clause [ values_clause ] [ error_logging_clause ] ]...\n    ]...\n    [ ELSE insert_into_clause\n        [ values_clause ]\n        [ error_logging_clause ]\n        [ insert_into_clause [ values_clause ] [ error_logging_clause ] ]...\n    ]\n\nerror_logging_clause:\n    LOG ERRORS [ INTO [schema.] table_name ] [ (simple_expression) ] [ REJECT LIMIT { integer | UNLIMITED } ]\n\noverwrite_table_insert:\n    [/*+PARALLEL(N)*/] OVERWRITE table_name select_stmt\n"
    ],
    "Description": [
        "该语句用于添加一个或多个记录到表中。",
        "\n\n\n参数\n描述\n\n\n\n\nhint_options\n指定 Hint 选项，为可选项。更多使用 Hint 信息，参见 Hint 概述。OceanBase 数据库 Oracle 模式 INSERT INTO SELECT 语句支持 direct Hint 的启用旁路导入，格式为：/*+ direct(bool, int, load_mode)} enable_parallel_dml PARALLEL(N) */。 \n      \nbool：表示写入的数据是否需要排序，true 表示需要排序，false 表示不需要排序。\nint：表示最大容忍的错误行数。\nload_mode：可选参数，表示旁路导入的模式。取值须使用英文单引号包起来，取值如下： \n        \nfull：默认值，表示全量导入。\ninc：表示增量导入，支持 INSERT 和 IGNORE 语义。\ninc_replace：表示增量导入，但不检查主键是否重复，相当于 REPLACE 语义的增量导入。\n\nenable_parallel_dml parallel(N)：加载数据的并行度，N 默认为 4。 \n        \n说明\n一般情况下，enable_parallel_dml Hint 和 parallel Hint 必须配合使用才能开启并行 DML。不过，当目标表的 Schema 上指定了表级别的并行度时，仅需指定 enable_parallel_dml Hint。\n\n 更多使用 INSERT INTO 旁路导入的信息，参见 使用 INSERT INTO SELECT 语句旁路导入数据。 \n      \n注意\n在执行旁路导入任务的过程中，不建议同时进行 OceanBase 数据库的升级操作，因为这可能导致旁路导入任务失败。\n\n\n\nsingle_table_insert\n单表插入。\n\n\ninsert_table_clause\n指定的插入的表，可以是基表、可更新视图、特殊子查询。\n\n\nopt_nologging\n尽量减少插入时的日志信息。\n\n\ncolumn_list\n指定要插入的列名。\n\n\nreturning_exprs\n返回插入数据之后的投影列。\n\n\ninsert_into_clause\n将插入数据之后的列值插入到指定列表中。\n\n\nmulti_table_insert\n多表插入。\n\n\nconditional_insert_clause\n带条件的多表插入。 \n      \nALL：遍历所有匹配条件的分支，只要满足条件就会将数据插入对应的表。\nFIRST：找到第一个满足条件的分支后，将数据插入该分支对应的表，不会再继续检查剩余分支的条件是否满足。\n\n\n\nerror_logging_clause\n将 SQL 错误和受影响的行数列中的值保存在一个错误记录表。\n\n\noverwrite_table_insert\n用于将查询结果替换表中的现有数据，即该语句会先清空表中的旧数据，再将新数据批量写入到表中。有关使用 INSERT OVERWRITE SELECT 语句的示例信息，参见 插入数据 中的 使用 INSERT OVERWRITE SELECT 语句插入数据 章节。 \n      \n注意\n该语句无法在多行事务中操作。因此，为确保操作顺利进行，需先执行 SET autocommit = on; 命令开启自动提交事务。\n\n\n\nselect_stmt\n指定 SELECT 子句。有关查询语句的详细信息，参见 SIMPLE SELECT。\n\n\n",
        "\n注意\n特殊子查询指的类似于可更新视图对应的子查询，这类子查询不应该包含复杂的算子（比如 group by、distinct、window function 等）。\n"
    ],
    "Examples": [
        "obclient> CREATE TABLE tbl1(col1 INT PRIMARY KEY, col2 INT,col3 INT);\nQuery OK, 0 rows affected\n",
        "obclient> INSERT INTO tbl1 VALUES(1,2,3);\nQuery OK, 1 row affected\n\nobclient> SELECT * FROM tbl1;\n+------+------+------+\n| COL1 | COL2 | COL3 |\n+------+------+------+\n|    1 |    2 |    3 |\n+------+------+------+\n1 row in set\n",
        "obclient>INSERT INTO (SELECT * FROM tbl1) VALUES(1,2,3);\nQuery OK, 1 row affected\n\nobclient> SELECT * FROM tbl1;\n+----+------+------+\n| COL1 | COL2   | COL3   |\n+----+------+------+\n|  1 |    2 |    3 |\n+----+------+------+\n1 row in set\n",
        "obclient> INSERT INTO tbl1 VALUES(1,2,3) RETURNING col1;\n+------+\n| COL1 |\n+------+\n|    1 |\n+------+\n1 row in set\n\nobclient> SELECT * FROM tbl1;\n+------+------+------+\n| COL1 | COL2 | COL3 |\n+------+------+------+\n|    1 |    2 |    3 |\n+------+------+------+\n1 row in set\n",
        "obclient> INSERT ALL INTO tbl1 VALUES(1,1,1)\n                                    INTO tbl2 VALUES(2,2,2)\n                SELECT * FROM tbl3 WHERE ROWNUM< 2;\nQuery OK, 2 rows affected\nRecords: 2  Duplicates: 0  Warnings: 0\n\nobclient> SELECT * FROM tbl1;\n+------+------+------+\n| COL1 | COL2 | COL3 |\n+------+------+------+\n|    1 |    1 |    1 |\n+------+------+------+\n1 row in set\n\nobclient> SELECT * FROM tbl2;\n+------+------+------+\n| COL1 | COL2 | COL3 |\n+------+------+------+\n|    2 |    2 |    2 |\n+------+------+------+\n1 row in set\n",
        "obclient> INSERT INTO tbl VALUES(1,2,3);\nQuery OK, 1 row affected\n\nobclient>INSERT ALL\n              WHEN col2 > 1 THEN INTO tbl1 VALUES(1,1,1)\n              WHEN col3 > 1 THEN INTO tbl2 VALUES(2,2,2)\n              ELSE INTO tbl1 VALUES(3,3,3) SELECT col2,col3 FROM tbl;\nQuery OK, 2 rows affected\nRecords: 2  Duplicates: 0  Warnings: 0\n\nobclient> SELECT * FROM tbl1;\n+----+------+------+\n| COL1 | COL2   | COL3   |\n+----+------+------+\n|  1 |    1 |    1 |\n+----+------+------+\n1 row in set\n\nobclient> SELECT * FROM tbl2;\n+----+------+------+\n| COL1 | COL2   | COL3   |\n+----+------+------+\n|  2 |    2 |    2 |\n+----+------+------+\n1 row in set\n",
        "obclient>INSERT INTO tbl VALUES(1,2,3);\nQuery OK, 1 row affected\n\nobclient>INSERT ALL\n              WHEN col2 > 1 THEN INTO tbl1 VALUES(1,1,1) INTO tbl2 VALUES(4,4,4)\n              WHEN col3 > 1 THEN INTO tbl2 VALUES(2,2,2)\n              ELSE INTO tbl1 VALUES(3,3,3) SELECT col2,col3 FROM tbl;\nQuery OK, 3 rows affected\nRecords: 3  Duplicates: 0  Warnings: 0\n\nobclient> SELECT * FROM tbl1;\n+----+------+------+\n| COL1 | COL2   | COL3   |\n+----+------+------+\n|  1 |    1 |    1 |\n+----+------+------+\n1 row in set\n\nobclient> SELECT * FROM tbl2;\n+------+------+------+\n| COL1   | COL2   | COL3   |\n+------+------+------+\n|    4 |    4 |    4 |\n|    2 |    2 |    2 |\n+------+------+------+\n2 rows in set\n",
        "obclient [SYS]> INSERT /*+ direct(true, 0, 'inc_replace') enable_parallel_dml parallel(2) */ INTO tbl2 SELECT * FROM tbl1;\n",
        "Query OK, 8 rows affected\nRecords: 8  Duplicates: 0  Warnings: 0\n"
    ],
    "Category": [
        "DML"
    ]
}