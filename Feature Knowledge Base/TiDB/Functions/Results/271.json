{
    "HTML": [
        "https://docs.pingcap.com/zh/tidb/v8.3/tidb-functions"
    ],
    "Title": [
        "TIDB_SHARD"
    ],
    "Feature": [
        "TIDB_SHARD"
    ],
    "Description": [
        "TIDB_SHARD",
        "TIDB_SHARD() 函数用于创建一个 SHARD INDEX 来打散热点索引。SHARD INDEX 是一种以 TIDB_SHARD() 函数为前缀的表达式索引。",
        "创建方式：  使用 uk((tidb_shard(a)), a)) 为字段 a 创建一个 SHARD INDEX。当二级唯一索引 uk((tidb_shard(a)), a)) 的索引字段 a 上存在因单调递增或递减而产生的热点时，索引的前缀 tidb_shard(a) 会打散热点，从而提升集群可扩展性。适用场景：二级唯一索引上 key 值存在单调递增或递减导致的写入热点，且该索引包含的列是整型。业务中 SQL 语句根据该二级索引的全部字段做等值查询，查询可以是单独的 SELECT，也可以是 UPDATE，DELETE 等产生的内部查询，等值查询包括 a = 1 或 a IN (1, 2, ......) 两种方式。使用限制：非等值查询无法使用索引。查询条件中 AND 和 OR 混合且最外层是 AND 算子时无法使用 SHARD INDEX。GROUP BY 无法使用 SHARD INDEX。ORDER BY 无法使用 SHARD INDEX。ON 子句无法使用 SHARD INDEX。WHERE 子查询无法使用 SHARD INDEX。SHARD INDEX 只能打散整型字段的唯一索引。SHARD INDEX 联合索引可能失效。SHARD INDEX 无法走 FastPlan 流程，影响优化器性能。SHARD INDEX 无法使用执行计划缓存。"
    ],
    "Examples": [],
    "Category": [
        "TiDB 特有的函数"
    ]
}