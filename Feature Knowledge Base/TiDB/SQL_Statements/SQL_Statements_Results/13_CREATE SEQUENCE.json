{
    "HTML": [
        "https://docs.pingcap.com//zh/tidb/stable/sql-statement-create-sequence"
    ],
    "Title": [
        "CREATE SEQUENCE"
    ],
    "Feature": [
        "CreateSequenceStmt ::=\n    'CREATE' 'SEQUENCE' IfNotExists TableName CreateSequenceOptionListOpt\n\nIfNotExists ::=\n    ('IF' 'NOT' 'EXISTS')?\n\nTableName ::=\n    Identifier ('.' Identifier)?\n\nCreateSequenceOptionListOpt ::=\n    SequenceOption*\n\nSequenceOptionList ::=\n    SequenceOption\n\nSequenceOption ::=\n    ( 'INCREMENT' ( '='? | 'BY' ) | 'START' ( '='? | 'WITH' ) | ( 'MINVALUE' | 'MAXVALUE' | 'CACHE' ) '='? ) SignedNum\n|   'COMMENT' '='? stringLit\n|   'NOMINVALUE'\n|   'NO' ( 'MINVALUE' | 'MAXVALUE' | 'CACHE' | 'CYCLE' )\n|   'NOMAXVALUE'\n|   'NOCACHE'\n|   'CYCLE'\n|   'NOCYCLE'\n"
    ],
    "Description": [
        "CREATE SEQUENCE \u8bed\u53e5\u7528\u4e8e\u5728 TiDB \u4e2d\u521b\u5efa\u5e8f\u5217\u5bf9\u8c61\u3002\u5e8f\u5217\u662f\u4e00\u79cd\u4e0e\u8868\u3001\u89c6\u56fe\u5bf9\u8c61\u5e73\u7ea7\u7684\u6570\u636e\u5e93\u5bf9\u8c61\uff0c\u7528\u4e8e\u751f\u6210\u81ea\u5b9a\u4e49\u7684\u5e8f\u5217\u5316 ID\u3002"
    ],
    "Examples": [
        "\u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u53c2\u6570\u7684\u5e8f\u5217\u5bf9\u8c61\u3002CREATE SEQUENCE seq;\nQuery OK, 0 rows affected (0.06 sec)\n\u4f7f\u7528 NEXTVAL() \u51fd\u6570\u83b7\u53d6\u5e8f\u5217\u5bf9\u8c61\u7684\u4e0b\u4e00\u4e2a\u503c\u3002SELECT NEXTVAL(seq);\n+--------------+\n| NEXTVAL(seq) |\n+--------------+\n|            1 |\n+--------------+\n1 row in set (0.02 sec)\n\u4f7f\u7528 LASTVAL() \u51fd\u6570\u83b7\u53d6\u672c\u4f1a\u8bdd\u4e0a\u4e00\u6b21\u8c03\u7528\u5e8f\u5217\u5bf9\u8c61\u6240\u4ea7\u751f\u7684\u503c\u3002SELECT LASTVAL(seq);\n+--------------+\n| LASTVAL(seq) |\n+--------------+\n|            1 |\n+--------------+\n1 row in set (0.02 sec)\n\u4f7f\u7528 SETVAL() \u51fd\u6570\u8bbe\u7f6e\u5e8f\u5217\u5bf9\u8c61\u5f53\u524d\u503c\u7684\u4f4d\u7f6e\u3002SELECT SETVAL(seq, 10);\n+-----------------+\n| SETVAL(seq, 10) |\n+-----------------+\n|              10 |\n+-----------------+\n1 row in set (0.01 sec)\n\u4e5f\u53ef\u4f7f\u7528 next value for \u8bed\u6cd5\u83b7\u53d6\u5e8f\u5217\u7684\u4e0b\u4e00\u4e2a\u503c\u3002SELECT next value for seq;\n+--------------------+\n| next value for seq |\n+--------------------+\n|                 11 |\n+--------------------+\n1 row in set (0.00 sec)\n\u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u81ea\u5b9a\u4e49\u53c2\u6570\u7684\u5e8f\u5217\u5bf9\u8c61\u3002CREATE SEQUENCE seq2 start 3 increment 2 minvalue 1 maxvalue 10 cache 3;\nQuery OK, 0 rows affected (0.01 sec)\n\u5f53\u672c\u4f1a\u8bdd\u8fd8\u672a\u4f7f\u7528\u8fc7\u5e8f\u5217\u5bf9\u8c61\u65f6\uff0cLASTVAL() \u51fd\u6570\u8fd4\u56de NULL \u503c\u3002SELECT LASTVAL(seq2);\n+---------------+\n| LASTVAL(seq2) |\n+---------------+\n|          NULL |\n+---------------+\n1 row in set (0.01 sec)\n\u5e8f\u5217\u5bf9\u8c61 NEXTVAL() \u7684\u7b2c\u4e00\u4e2a\u6709\u6548\u503c\u4e3a start \u503c\u3002SELECT NEXTVAL(seq2);\n+---------------+\n| NEXTVAL(seq2) |\n+---------------+\n|             3 |\n+---------------+\n1 row in set (0.00 sec)\n\u4f7f\u7528 SETVAL() \u867d\u7136\u53ef\u4ee5\u6539\u53d8\u5e8f\u5217\u5bf9\u8c61\u5f53\u524d\u503c\u7684\u4f4d\u7f6e\uff0c\u4f46\u662f\u65e0\u6cd5\u6539\u53d8\u4e0b\u4e00\u4e2a\u503c\u7684\u7b49\u5dee\u89c4\u5f8b\u3002SELECT SETVAL(seq2, 6);\n+-----------------+\n| SETVAL(seq2, 6) |\n+-----------------+\n|               6 |\n+-----------------+\n1 row in set (0.00 sec)\n\u4f7f\u7528 NEXTVAL() \u4e0b\u4e00\u4e2a\u503c\u83b7\u53d6\u65f6\uff0c\u4f1a\u9075\u5faa\u5e8f\u5217\u5b9a\u4e49\u7684\u7b49\u5dee\u89c4\u5f8b\u3002SELECT next value for seq2;\n+---------------------+\n| next value for seq2 |\n+---------------------+\n|                   7 |\n+---------------------+\n1 row in set (0.00 sec)\n\u53ef\u4ee5\u5c06\u5e8f\u5217\u7684\u4e0b\u4e00\u4e2a\u503c\u4f5c\u4e3a\u5217\u7684\u9ed8\u8ba4\u503c\u6765\u4f7f\u7528\u3002CREATE TABLE t(a int default next value for seq2);\nQuery OK, 0 rows affected (0.02 sec)\n\u4e0b\u5217\u793a\u4f8b\u4e2d\uff0c\u56e0\u4e3a\u6ca1\u6709\u6307\u5b9a\u503c\uff0c\u4f1a\u76f4\u63a5\u83b7\u53d6 seq2 \u7684\u9ed8\u8ba4\u503c\u6765\u4f7f\u7528\u3002INSERT into t values();\nQuery OK, 1 row affected (0.00 sec)\nSELECT * from t;\n+------+\n| a    |\n+------+\n|    9 |\n+------+\n1 row in set (0.00 sec)\n\u4e0b\u5217\u793a\u4f8b\u4e2d\uff0c\u56e0\u4e3a\u6ca1\u6709\u6307\u5b9a\u503c\uff0c\u4f1a\u76f4\u63a5\u83b7\u53d6 seq2 \u7684\u9ed8\u8ba4\u503c\u6765\u4f7f\u7528\u3002\u7531\u4e8e seq2 \u7684\u4e0b\u4e00\u4e2a\u503c\u8d85\u8fc7\u4e86\u4e0a\u8ff0\u793a\u4f8b (CREATE SEQUENCE seq2 start 3 increment 2 minvalue 1 maxvalue 10 cache 3;) \u7684\u5b9a\u4e49\u8303\u56f4\uff0c\u6240\u4ee5\u4f1a\u663e\u793a\u62a5\u9519\u3002INSERT into t values();\nERROR 4135 (HY000): Sequence 'test.seq2' has run out\n"
    ],
    "Category": [
        "Schema \u7ba1\u7406\u4e0e\u6570\u636e\u5b9a\u4e49\u8bed\u53e5 (DDL)"
    ]
}