{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-analyze-table"], "Title": ["ANALYZE"], "Feature": ["AnalyzeTableStmt ::=\n    'ANALYZE' ( 'TABLE' ( TableNameList ( 'ALL COLUMNS' | 'PREDICATE COLUMNS' ) | TableName ( 'INDEX' IndexNameList? | AnalyzeColumnOption | 'PARTITION' PartitionNameList ( 'INDEX' IndexNameList? | AnalyzeColumnOption )? )? ) ) AnalyzeOptionListOpt\n\nAnalyzeOptionListOpt ::=\n( WITH AnalyzeOptionList )?\n\nAnalyzeOptionList ::=\nAnalyzeOption ( ',' AnalyzeOption )*\n\nAnalyzeOption ::=\n( NUM ( 'BUCKETS' | 'TOPN' | ( 'CMSKETCH' ( 'DEPTH' | 'WIDTH' ) ) | 'SAMPLES' ) ) | ( FLOATNUM 'SAMPLERATE' )\n\nAnalyzeColumnOption ::=\n( 'ALL COLUMNS' | 'PREDICATE COLUMNS' | 'COLUMNS' ColumnNameList )\n\nTableNameList ::=\n    TableName (',' TableName)*\n\nTableName ::=\n    Identifier ( '.' Identifier )?\n\nColumnNameList ::=\n    Identifier ( ',' Identifier )*\n\nIndexNameList ::=\n    Identifier ( ',' Identifier )*\n\nPartitionNameList ::=\n    Identifier ( ',' Identifier )*\n"], "Description": ["ANALYZE \u8bed\u53e5\u7528\u4e8e\u66f4\u65b0 TiDB \u5728\u8868\u548c\u7d22\u5f15\u4e0a\u7559\u4e0b\u7684\u7edf\u8ba1\u4fe1\u606f\u3002\u6267\u884c\u5927\u6279\u91cf\u66f4\u65b0\u6216\u5bfc\u5165\u8bb0\u5f55\u540e\uff0c\u6216\u67e5\u8be2\u6267\u884c\u8ba1\u5212\u4e0d\u662f\u6700\u4f73\u65f6\uff0c\u5efa\u8bae\u8fd0\u884c ANALYZE\u3002", "\u5f53 TiDB \u9010\u6e10\u53d1\u73b0\u8fd9\u4e9b\u7edf\u8ba1\u6570\u636e\u4e0e\u9884\u4f30\u4e0d\u4e00\u81f4\u65f6\uff0c\u4e5f\u4f1a\u81ea\u52a8\u66f4\u65b0\u5176\u7edf\u8ba1\u6570\u636e\u3002", "\u76ee\u524d TiDB \u6536\u96c6\u7edf\u8ba1\u4fe1\u606f\u4e3a\u5168\u91cf\u6536\u96c6\uff0c\u901a\u8fc7 ANALYZE TABLE \u8bed\u53e5\u6765\u5b9e\u73b0\u3002\u5173\u4e8e\u8be5\u8bed\u53e5\u7684\u8be6\u7ec6\u4f7f\u7528\u65b9\u5f0f\uff0c\u53ef\u53c2\u8003\u5e38\u89c4\u7edf\u8ba1\u4fe1\u606f\u3002"], "Examples": ["CREATE TABLE t1 (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, c1 INT NOT NULL);\n", "INSERT INTO t1 (c1) VALUES (1),(2),(3),(4),(5);\n", "ALTER TABLE t1 ADD INDEX (c1);\n", "EXPLAIN SELECT * FROM t1 WHERE c1 = 3;\n", "ANALYZE TABLE t1;\n", "EXPLAIN SELECT * FROM t1 WHERE c1 = 3;\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-create-binding"], "Title": ["CREATE [GLOBAL|SESSION] BINDING"], "Feature": ["CreateBindingStmt ::=\n    'CREATE' GlobalScope 'BINDING' ( 'FOR' BindableStmt 'USING' BindableStmt\n|   'FROM' 'HISTORY' 'USING' 'PLAN' 'DIGEST' PlanDigest )\n\nGlobalScope ::=\n    ( 'GLOBAL' | 'SESSION' )?\n\nBindableStmt ::=\n    ( SelectStmt | UpdateStmt | InsertIntoStmt | ReplaceIntoStmt | DeleteStmt )\n"], "Description": ["CREATE [GLOBAL|SESSION] BINDING \u8bed\u53e5\u7528\u4e8e\u5728 TiDB \u4e2d\u521b\u5efa\u65b0\u7684\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a\u3002\u7ed1\u5b9a\u53ef\u7528\u4e8e\u5c06\u4f18\u5316\u5668 Hint \u63d2\u5165\u8bed\u53e5\u4e2d\uff0c\u800c\u65e0\u9700\u66f4\u6539\u5e95\u5c42\u67e5\u8be2\u3002", "BINDING \u8bed\u53e5\u53ef\u4ee5\u5728 GLOBAL \u6216\u8005 SESSION \u4f5c\u7528\u57df\u5185\u521b\u5efa\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a\u3002\u5728\u4e0d\u6307\u5b9a\u4f5c\u7528\u57df\u65f6\uff0c\u9ed8\u8ba4\u7684\u4f5c\u7528\u57df\u4e3a SESSION\u3002", "\u88ab\u7ed1\u5b9a\u7684 SQL \u8bed\u53e5\u4f1a\u88ab\u53c2\u6570\u5316\u540e\u5b58\u50a8\u5230\u7cfb\u7edf\u8868\u4e2d\u3002\u5728\u5904\u7406 SQL \u67e5\u8be2\u65f6\uff0c\u53ea\u8981\u53c2\u6570\u5316\u540e\u7684 SQL \u8bed\u53e5\u548c\u7cfb\u7edf\u8868\u4e2d\u67d0\u4e2a\u88ab\u7ed1\u5b9a\u7684 SQL \u8bed\u53e5\u4e00\u81f4\uff0c\u5e76\u4e14\u7cfb\u7edf\u53d8\u91cf tidb_use_plan_baselines \u7684\u503c\u4e3a ON\uff08\u5176\u9ed8\u8ba4\u503c\u4e3a ON\uff09\uff0c\u5373\u53ef\u4f7f\u7528\u76f8\u5e94\u7684\u4f18\u5316\u5668 Hint\u3002\u5982\u679c\u5b58\u5728\u591a\u4e2a\u53ef\u5339\u914d\u7684\u6267\u884c\u8ba1\u5212\uff0c\u4f18\u5316\u5668\u4f1a\u4ece\u4e2d\u9009\u62e9\u4ee3\u4ef7\u6700\u5c0f\u7684\u4e00\u4e2a\u8fdb\u884c\u7ed1\u5b9a\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003\u521b\u5efa\u7ed1\u5b9a\u3002"], "Examples": ["CREATE TABLE t1 (\n    id INT NOT NULL PRIMARY KEY auto_increment,\n    b INT NOT NULL,\n    pad VARBINARY(255),\n    INDEX(b)\n   );\nQuery OK, 0 rows affected (0.07 sec)\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM dual;\nQuery OK, 1 row affected (0.01 sec)\nRecords: 1  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 1 row affected (0.00 sec)\nRecords: 1  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 8 rows affected (0.00 sec)\nRecords: 8  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 1000 rows affected (0.04 sec)\nRecords: 1000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (1.74 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (2.15 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (2.64 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nSELECT SLEEP(1);\n+----------+\n| SLEEP(1) |\n+----------+\n|        0 |\n+----------+\n1 row in set (1.00 sec)\n\nANALYZE TABLE t1;\nQuery OK, 0 rows affected (1.33 sec)\n\nEXPLAIN ANALYZE SELECT * FROM t1 WHERE b = 123;\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| id                            | estRows | actRows | task      | access object        | execution info                                                            | operator info                     | memory         | disk |\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| IndexLookUp_10                | 583.00  | 297     | root      |                      | time:10.545072ms, loops:2, rpc num: 1, rpc time:398.359\u00b5s, proc keys:297  |                                   | 109.1484375 KB | N/A  |\n| \u251c\u2500IndexRangeScan_8(Build)     | 583.00  | 297     | cop[tikv] | table:t1, index:b(b) | time:0s, loops:4                                                          | range:[123,123], keep order:false | N/A            | N/A  |\n| \u2514\u2500TableRowIDScan_9(Probe)     | 583.00  | 297     | cop[tikv] | table:t1             | time:12ms, loops:4                                                        | keep order:false                  | N/A            | N/A  |\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n3 rows in set (0.02 sec)\n\nCREATE SESSION BINDING FOR\n    SELECT * FROM t1 WHERE b = 123\n   USING\n    SELECT * FROM t1 IGNORE INDEX (b) WHERE b = 123;\nQuery OK, 0 rows affected (0.00 sec)\n\nEXPLAIN ANALYZE  SELECT * FROM t1 WHERE b = 123;\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n| id                      | estRows   | actRows | task      | access object | execution info                                                                 | operator info      | memory        | disk |\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n| TableReader_7           | 583.00    | 297     | root      |               | time:222.32506ms, loops:2, rpc num: 1, rpc time:222.078952ms, proc keys:301010 | data:Selection_6   | 88.6640625 KB | N/A  |\n| \u2514\u2500Selection_6           | 583.00    | 297     | cop[tikv] |               | time:224ms, loops:298                                                          | eq(test.t1.b, 123) | N/A           | N/A  |\n|   \u2514\u2500TableFullScan_5     | 301010.00 | 301010  | cop[tikv] | table:t1      | time:220ms, loops:298                                                          | keep order:false   | N/A           | N/A  |\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n3 rows in set (0.22 sec)\n\nSHOW SESSION BINDINGS\\G\n*************************** 1. row ***************************\nOriginal_sql: select * from t1 where b = ?\n    Bind_sql: SELECT * FROM t1 IGNORE INDEX (b) WHERE b = 123\n  Default_db: test\n      Status: using\n Create_time: 2020-05-22 14:38:03.456\n Update_time: 2020-05-22 14:38:03.456\n     Charset: utf8mb4\n   Collation: utf8mb4_0900_ai_ci\n1 row in set (0.00 sec)\n\nDROP SESSION BINDING FOR SELECT * FROM t1 WHERE b = 123;\nQuery OK, 0 rows affected (0.00 sec)\n\nEXPLAIN ANALYZE  SELECT * FROM t1 WHERE b = 123;\n+-------------------------------+---------+---------+-----------+----------------------+-------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| id                            | estRows | actRows | task      | access object        | execution info                                                          | operator info                     | memory         | disk |\n+-------------------------------+---------+---------+-----------+----------------------+-------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| IndexLookUp_10                | 583.00  | 297     | root      |                      | time:5.31206ms, loops:2, rpc num: 1, rpc time:665.927\u00b5s, proc keys:297  |                                   | 109.1484375 KB | N/A  |\n| \u251c\u2500IndexRangeScan_8(Build)     | 583.00  | 297     | cop[tikv] | table:t1, index:b(b) | time:0s, loops:4                                                        | range:[123,123], keep order:false | N/A            | N/A  |\n| \u2514\u2500TableRowIDScan_9(Probe)     | 583.00  | 297     | cop[tikv] | table:t1             | time:0s, loops:4                                                        | keep order:false                  | N/A            | N/A  |\n+-------------------------------+---------+---------+-----------+----------------------+-------------------------------------------------------------------------+-----------------------------------+----------------+------+\n3 rows in set (0.01 sec)\n", "mysql> CREATE TABLE t(id INT PRIMARY KEY , a INT, KEY(a));\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> SELECT /*+ IGNORE_INDEX(t, a) */ * FROM t WHERE a = 1;\nEmpty set (0.01 sec)\n\nmysql> SELECT plan_digest FROM INFORMATION_SCHEMA.STATEMENTS_SUMMARY WHERE QUERY_SAMPLE_TEXT = 'SELECT /*+ IGNORE_INDEX(t, a) */ * FROM t WHERE a = 1';\n+------------------------------------------------------------------+\n| plan_digest                                                      |\n+------------------------------------------------------------------+\n| 4e3159169cc63c14b139a4e7d72eae1759875c9a9581f94bb2079aae961189cb |\n+------------------------------------------------------------------+\n1 row in set (0.01 sec)\n\nmysql> CREATE BINDING FROM HISTORY USING PLAN DIGEST '4e3159169cc63c14b139a4e7d72eae1759875c9a9581f94bb2079aae961189cb';\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> SELECT * FROM t WHERE a = 1;\nEmpty set (0.01 sec)\n\nmysql> SELECT @@LAST_PLAN_FROM_BINDING;\n+--------------------------+\n| @@LAST_PLAN_FROM_BINDING |\n+--------------------------+\n|                        1 |\n+--------------------------+\n1 row in set (0.01 sec)\n\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-drop-binding"], "Title": ["DROP [GLOBAL|SESSION] BINDING"], "Feature": ["DropBindingStmt ::=\n    'DROP' GlobalScope 'BINDING' 'FOR' ( BindableStmt ( 'USING' BindableStmt )?\n|   'SQL' 'DIGEST' SqlDigest)\n\nGlobalScope ::=\n    ( 'GLOBAL' | 'SESSION' )?\n\nBindableStmt ::=\n    ( SelectStmt | UpdateStmt | InsertIntoStmt | ReplaceIntoStmt | DeleteStmt )\n"], "Description": ["DROP BINDING \u8bed\u53e5\u7528\u4e8e\u5220\u9664\u6307\u5b9a\u7684 SQL \u7ed1\u5b9a\u3002\u7ed1\u5b9a\u53ef\u7528\u4e8e\u5c06\u4f18\u5316\u5668 Hint \u63d2\u5165\u8bed\u53e5\u4e2d\uff0c\u800c\u65e0\u9700\u66f4\u6539\u5e95\u5c42\u67e5\u8be2\u3002", "BINDING \u8bed\u53e5\u53ef\u4ee5\u5728 GLOBAL \u6216\u8005 SESSION \u4f5c\u7528\u57df\u5185\u5220\u9664\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a\u3002\u5728\u4e0d\u6307\u5b9a\u4f5c\u7528\u57df\u65f6\uff0c\u9ed8\u8ba4\u7684\u4f5c\u7528\u57df\u4e3a SESSION\u3002"], "Examples": ["CREATE TABLE t1 (\n    id INT NOT NULL PRIMARY KEY auto_increment,\n    b INT NOT NULL,\n    pad VARBINARY(255),\n    INDEX(b)\n   );\nQuery OK, 0 rows affected (0.07 sec)\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM dual;\nQuery OK, 1 row affected (0.01 sec)\nRecords: 1  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 1 row affected (0.00 sec)\nRecords: 1  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 8 rows affected (0.00 sec)\nRecords: 8  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 1000 rows affected (0.04 sec)\nRecords: 1000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (1.74 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (2.15 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (2.64 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nSELECT SLEEP(1);\n+----------+\n| SLEEP(1) |\n+----------+\n|        0 |\n+----------+\n1 row in set (1.00 sec)\n\nANALYZE TABLE t1;\nQuery OK, 0 rows affected (1.33 sec)\n\nEXPLAIN ANALYZE SELECT * FROM t1 WHERE b = 123;\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| id                            | estRows | actRows | task      | access object        | execution info                                                            | operator info                     | memory         | disk |\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| IndexLookUp_10                | 583.00  | 297     | root      |                      | time:10.545072ms, loops:2, rpc num: 1, rpc time:398.359\u00b5s, proc keys:297  |                                   | 109.1484375 KB | N/A  |\n| \u251c\u2500IndexRangeScan_8(Build)     | 583.00  | 297     | cop[tikv] | table:t1, index:b(b) | time:0s, loops:4                                                          | range:[123,123], keep order:false | N/A            | N/A  |\n| \u2514\u2500TableRowIDScan_9(Probe)     | 583.00  | 297     | cop[tikv] | table:t1             | time:12ms, loops:4                                                        | keep order:false                  | N/A            | N/A  |\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n3 rows in set (0.02 sec)\n\nCREATE SESSION BINDING FOR\n    SELECT * FROM t1 WHERE b = 123\n   USING\n    SELECT * FROM t1 IGNORE INDEX (b) WHERE b = 123;\nQuery OK, 0 rows affected (0.00 sec)\n\nEXPLAIN ANALYZE  SELECT * FROM t1 WHERE b = 123;\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n| id                      | estRows   | actRows | task      | access object | execution info                                                                 | operator info      | memory        | disk |\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n| TableReader_7           | 583.00    | 297     | root      |               | time:222.32506ms, loops:2, rpc num: 1, rpc time:222.078952ms, proc keys:301010 | data:Selection_6   | 88.6640625 KB | N/A  |\n| \u2514\u2500Selection_6           | 583.00    | 297     | cop[tikv] |               | time:224ms, loops:298                                                          | eq(test.t1.b, 123) | N/A           | N/A  |\n|   \u2514\u2500TableFullScan_5     | 301010.00 | 301010  | cop[tikv] | table:t1      | time:220ms, loops:298                                                          | keep order:false   | N/A           | N/A  |\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n3 rows in set (0.22 sec)\n\nSHOW SESSION BINDINGS\\G\n*************************** 1. row ***************************\nOriginal_sql: select * from t1 where b = ?\n    Bind_sql: SELECT * FROM t1 IGNORE INDEX (b) WHERE b = 123\n  Default_db: test\n      Status: using\n Create_time: 2020-05-22 14:38:03.456\n Update_time: 2020-05-22 14:38:03.456\n     Charset: utf8mb4\n   Collation: utf8mb4_0900_ai_ci\n1 row in set (0.00 sec)\n\nDROP SESSION BINDING FOR SELECT * FROM t1 WHERE b = 123;\nQuery OK, 0 rows affected (0.00 sec)\n\nEXPLAIN ANALYZE  SELECT * FROM t1 WHERE b = 123;\n+-------------------------------+---------+---------+-----------+----------------------+-------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| id                            | estRows | actRows | task      | access object        | execution info                                                          | operator info                     | memory         | disk |\n+-------------------------------+---------+---------+-----------+----------------------+-------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| IndexLookUp_10                | 583.00  | 297     | root      |                      | time:5.31206ms, loops:2, rpc num: 1, rpc time:665.927\u00b5s, proc keys:297  |                                   | 109.1484375 KB | N/A  |\n| \u251c\u2500IndexRangeScan_8(Build)     | 583.00  | 297     | cop[tikv] | table:t1, index:b(b) | time:0s, loops:4                                                        | range:[123,123], keep order:false | N/A            | N/A  |\n| \u2514\u2500TableRowIDScan_9(Probe)     | 583.00  | 297     | cop[tikv] | table:t1             | time:0s, loops:4                                                        | keep order:false                  | N/A            | N/A  |\n+-------------------------------+---------+---------+-----------+----------------------+-------------------------------------------------------------------------+-----------------------------------+----------------+------+\n3 rows in set (0.01 sec)\n\nSHOW SESSION BINDINGS\\G\nEmpty set (0.00 sec)\n", "mysql> CREATE TABLE t(id INT PRIMARY KEY , a INT, KEY(a));\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> SELECT /*+ IGNORE_INDEX(t, a) */ * FROM t WHERE a = 1;\nEmpty set (0.01 sec)\n\nmysql> SELECT plan_digest FROM INFORMATION_SCHEMA.STATEMENTS_SUMMARY WHERE QUERY_SAMPLE_TEXT = 'SELECT /*+ IGNORE_INDEX(t, a) */ * FROM t WHERE a = 1';\n+------------------------------------------------------------------+\n| plan_digest                                                      |\n+------------------------------------------------------------------+\n| 4e3159169cc63c14b139a4e7d72eae1759875c9a9581f94bb2079aae961189cb |\n+------------------------------------------------------------------+\n1 row in set (0.01 sec)\n\nmysql> CREATE BINDING FROM HISTORY USING PLAN DIGEST '4e3159169cc63c14b139a4e7d72eae1759875c9a9581f94bb2079aae961189cb';\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> SELECT * FROM t WHERE a = 1;\nEmpty set (0.01 sec)\n\nmysql> SELECT @@LAST_PLAN_FROM_BINDING;\n+--------------------------+\n| @@LAST_PLAN_FROM_BINDING |\n+--------------------------+\n|                        1 |\n+--------------------------+\n1 row in set (0.01 sec)\n\nmysql> SHOW BINDINGS\\G\n*************************** 1. row ***************************\nOriginal_sql: select * from `test` . `t` where `a` = ?\n    Bind_sql: SELECT /*+ use_index(@`sel_1` `test`.`t` ) ignore_index(`t` `a`)*/ * FROM `test`.`t` WHERE `a` = 1\n  Default_db: test\n      Status: enabled\n Create_time: 2022-12-14 15:26:22.277\n Update_time: 2022-12-14 15:26:22.277\n     Charset: utf8mb4\n   Collation: utf8mb4_general_ci\n      Source: history\n  Sql_digest: 6909a1bbce5f64ade0a532d7058dd77b6ad5d5068aee22a531304280de48349f\n Plan_digest: 4e3159169cc63c14b139a4e7d72eae1759875c9a9581f94bb2079aae961189cb\n1 row in set (0.02 sec)\n\nERROR:\nNo query specified\n\nmysql> DROP BINDING FOR SQL DIGEST '6909a1bbce5f64ade0a532d7058dd77b6ad5d5068aee22a531304280de48349f';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SHOW BINDINGS\\G\nEmpty set (0.01 sec)\n\nERROR:\nNo query specified\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-drop-stats"], "Title": ["DROP STATS"], "Feature": ["DropStatsStmt ::=\n    'DROP' 'STATS' TableName  (\"PARTITION\" partition | \"GLOBAL\")? ( ',' TableName )*\n\nTableName ::=\n    Identifier ('.' Identifier)?\n"], "Description": ["DROP STATS \u8bed\u53e5\u7528\u4e8e\u4ece\u5f53\u524d\u6240\u9009\u5b9a\u7684\u6570\u636e\u5e93\u4e2d\u5220\u9664\u9009\u5b9a\u8868\u7684\u7edf\u8ba1\u4fe1\u606f\u3002"], "Examples": ["CREATE TABLE t(a INT);\n", "SHOW STATS_META WHERE db_name='test' and table_name='t';\n", "DROP STATS t;\n", "SHOW STATS_META WHERE db_name='test' and table_name='t';\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-explain-analyze"], "Title": ["EXPLAIN ANALYZE"], "Feature": ["ExplainSym ::=\n    'EXPLAIN'\n|   'DESCRIBE'\n|    'DESC'\n\nExplainStmt ::=\n    ExplainSym ( TableName ColumnName? | 'ANALYZE'? ExplainableStmt | 'FOR' 'CONNECTION' NUM | 'FORMAT' '=' ( stringLit | ExplainFormatType ) ( 'FOR' 'CONNECTION' NUM | ExplainableStmt ) )\n\nExplainableStmt ::=\n    SelectStmt\n|   DeleteFromStmt\n|   UpdateStmt\n|   InsertIntoStmt\n|   ReplaceIntoStmt\n|   UnionStmt\n"], "Description": ["EXPLAIN ANALYZE \u8bed\u53e5\u7684\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e EXPLAIN\uff0c\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u524d\u8005\u5b9e\u9645\u4e0a\u4f1a\u6267\u884c\u8bed\u53e5\u3002\u8fd9\u6837\u53ef\u4ee5\u5c06\u67e5\u8be2\u8ba1\u5212\u4e2d\u7684\u4f30\u8ba1\u503c\u4e0e\u6267\u884c\u65f6\u6240\u9047\u5230\u7684\u5b9e\u9645\u503c\u8fdb\u884c\u6bd4\u8f83\u3002\u5982\u679c\u4f30\u8ba1\u503c\u4e0e\u5b9e\u9645\u503c\u663e\u8457\u4e0d\u540c\uff0c\u90a3\u4e48\u5e94\u8003\u8651\u5728\u53d7\u5f71\u54cd\u7684\u8868\u4e0a\u8fd0\u884c ANALYZE TABLE\u3002", ".css-1weqspv{padding-top:0.5rem;padding-bottom:0.5rem;}.css-1weqspv .MuiAlert-message p{margin-bottom:0px;margin-top:0px;}", "\u6ce8\u610f\u5728\u4f7f\u7528 EXPLAIN ANALYZE \u6267\u884c DML \u8bed\u53e5\u65f6\uff0c\u6570\u636e\u7684\u4fee\u6539\u64cd\u4f5c\u4f1a\u88ab\u6b63\u5e38\u6267\u884c\u3002\u4f46\u76ee\u524d DML \u8bed\u53e5\u8fd8\u65e0\u6cd5\u5c55\u793a\u6267\u884c\u8ba1\u5212\u3002"], "Examples": ["CREATE TABLE t1 (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT, c1 INT NOT NULL);\n", "INSERT INTO t1 (c1) VALUES (1), (2), (3);\n", "EXPLAIN ANALYZE SELECT * FROM t1 WHERE id = 1;\n", "EXPLAIN ANALYZE SELECT * FROM t1;\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-show-analyze-status"], "Title": ["SHOW ANALYZE STATUS"], "Feature": ["ShowAnalyzeStatusStmt ::= 'SHOW' 'ANALYZE' 'STATUS' ShowLikeOrWhereOpt\n\nShowLikeOrWhereOpt ::= 'LIKE' SimpleExpr | 'WHERE' Expression\n"], "Description": ["SHOW ANALYZE STATUS \u8bed\u53e5\u63d0\u4f9b TiDB \u6b63\u5728\u6267\u884c\u7684\u7edf\u8ba1\u4fe1\u606f\u6536\u96c6\u4efb\u52a1\u4ee5\u53ca\u6709\u9650\u6761\u5386\u53f2\u4efb\u52a1\u8bb0\u5f55\u3002", "\u4ece TiDB v6.1.0 \u8d77\uff0c\u6267\u884c SHOW ANALYZE STATUS \u8bed\u53e5\u5c06\u663e\u793a\u96c6\u7fa4\u7ea7\u522b\u7684\u4efb\u52a1\uff0c\u4e14 TiDB \u91cd\u542f\u540e\u4ecd\u80fd\u770b\u5230\u91cd\u542f\u4e4b\u524d\u7684\u4efb\u52a1\u8bb0\u5f55\u3002\u5728 TiDB v6.1.0 \u4e4b\u524d\uff0c\u6267\u884c SHOW ANALYZE STATUS \u8bed\u53e5\u4ec5\u663e\u793a\u5b9e\u4f8b\u7ea7\u522b\u7684\u4efb\u52a1\uff0c\u4e14 TiDB \u91cd\u542f\u540e\u4efb\u52a1\u8bb0\u5f55\u4f1a\u88ab\u6e05\u7a7a\u3002", "\u4ece TiDB v6.1.0 \u8d77\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u8868 mysql.analyze_jobs \u67e5\u770b\u8fc7\u53bb 7 \u5929\u5185\u7684\u5386\u53f2\u8bb0\u5f55\u3002", "\u4ece TiDB v7.3.0 \u8d77\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u8868 mysql.analyze_jobs \u6216\u8005 SHOW ANALYZE STATUS \u67e5\u770b\u5f53\u524d ANALYZE \u4efb\u52a1\u7684\u8fdb\u5ea6\u3002", "\u76ee\u524d\uff0cSHOW ANALYZE STATUS \u8bed\u53e5\u8fd4\u56de\u4ee5\u4e0b\u5217\uff1a", "\u5217\u540d\u8bf4\u660eTable_schema\u6570\u636e\u5e93\u540dTable_name\u8868\u540dPartition_name\u5206\u533a\u540dJob_info\u4efb\u52a1\u5177\u4f53\u4fe1\u606f\u3002\u5f53\u6536\u96c6\u7d22\u5f15\u7684\u7edf\u8ba1\u4fe1\u606f\u65f6\uff0c\u8be5\u4fe1\u606f\u4f1a\u5305\u542b\u7d22\u5f15\u540d\u3002\u5f53 tidb_analyze_version = 2 \u65f6\uff0c\u8be5\u4fe1\u606f\u4f1a\u5305\u542b\u91c7\u6837\u7387\u7b49\u914d\u7f6e\u9879\u3002Processed_rows\u5df2\u7ecf ANALYZE \u7684\u884c\u6570Start_time\u4efb\u52a1\u5f00\u59cb\u6267\u884c\u7684\u65f6\u95f4End_time\u4efb\u52a1\u7ed3\u675f\u6267\u884c\u7684\u65f6\u95f4State\u4efb\u52a1\u72b6\u6001\uff0c\u5305\u62ec pending\uff08\u7b49\u5f85\uff09\u3001running\uff08\u6b63\u5728\u6267\u884c\uff09\u3001finished\uff08\u6267\u884c\u6210\u529f\uff09\u548c failed\uff08\u6267\u884c\u5931\u8d25\uff09Fail_reason\u4efb\u52a1\u5931\u8d25\u7684\u539f\u56e0\u3002\u5982\u679c\u6267\u884c\u6210\u529f\u5219\u4e3a NULL\u3002Instance\u6267\u884c\u4efb\u52a1\u7684 TiDB \u5b9e\u4f8bProcess_id\u6267\u884c\u4efb\u52a1\u7684 process ID"], "Examples": ["mysql> create table t(x int, index idx(x)) partition by hash(x) partitions 2;\nQuery OK, 0 rows affected (0.69 sec)\n\nmysql> set @@tidb_analyze_version = 1;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> analyze table t;\nQuery OK, 0 rows affected (0.20 sec)\n\nmysql> show analyze status;\n+--------------+------------+----------------+-------------------+----------------+---------------------+---------------------+----------+-------------+----------------+------------+------------------+----------+---------------------+\n| Table_schema | Table_name | Partition_name | Job_info          | Processed_rows | Start_time          | End_time            | State    | Fail_reason | Instance       | Process_ID | Remaining_seconds| Progress | Estimated_total_rows|\n+--------------+------------+----------------+-------------------+----------------+---------------------+---------------------+----------+-------------+----------------+------------+------------------+----------+---------------------+\n| test         | t          | p1             | analyze index idx |              0 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL             | NULL     | NULL                |\n| test         | t          | p0             | analyze index idx |              0 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL             | NULL     | NULL                |\n| test         | t          | p1             | analyze columns   |              0 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL             | NULL     | NULL                |\n| test         | t          | p0             | analyze columns   |              0 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL             | NULL     | NULL                |\n| test         | t1         | p0             | analyze columns   |       28523259 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | running  | NULL        | 127.0.0.1:4000 | 690208308  | 0s               | 0.9843   | 28978290            |\n+--------------+------------+----------------+-------------------+----------------+---------------------+---------------------+----------+-------------+----------------+------------+------------------+----------+---------------------+\n4 rows in set (0.01 sec)\n\nmysql> set @@tidb_analyze_version = 2;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> analyze table t;\nQuery OK, 0 rows affected, 2 warnings (0.03 sec)\n\nmysql> show analyze status;\n+--------------+------------+----------------+--------------------------------------------------------------------+----------------+---------------------+---------------------+----------+-------------+----------------+------------+--------------------+----------+----------------------+\n| Table_schema | Table_name | Partition_name | Job_info                                                           | Processed_rows | Start_time          | End_time            | State    | Fail_reason | Instance       | Process_ID | Remaining_seconds  | Progress | Estimated_total_rows |\n+--------------+------------+----------------+--------------------------------------------------------------------+----------------+---------------------+---------------------+----------+-------------+----------------+------------+--------------------+----------+----------------------+\n| test         | t          | p1             | analyze table all columns with 256 buckets, 500 topn, 1 samplerate |              0 | 2022-05-27 11:30:12 | 2022-05-27 11:30:12 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL               | NULL     | NULL                 |\n| test         | t          | p0             | analyze table all columns with 256 buckets, 500 topn, 1 samplerate |              0 | 2022-05-27 11:30:12 | 2022-05-27 11:30:12 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL               | NULL     | NULL                 |\n| test         | t          | p1             | analyze index idx                                                  |              0 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL               | NULL     | NULL                 |\n| test         | t          | p0             | analyze index idx                                                  |              0 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL               | NULL     | NULL                 |\n| test         | t          | p1             | analyze columns                                                    |              0 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL               | NULL     | NULL                 |\n| test         | t          | p0             | analyze columns                                                    |              0 | 2022-05-27 11:29:46 | 2022-05-27 11:29:46 | finished | NULL        | 127.0.0.1:4000 | NULL       | NULL               | NULL     | NULL                 |\n+--------------+------------+----------------+--------------------------------------------------------------------+----------------+---------------------+---------------------+----------+-------------+----------------+------------+--------------------+----------+----------------------+\n6 rows in set (0.00 sec)\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-show-bindings"], "Title": ["SHOW [GLOBAL|SESSION] BINDINGS"], "Feature": ["ShowBindingsStmt ::=\n    \"SHOW\" (\"GLOBAL\" | \"SESSION\")? \"BINDINGS\" ShowLikeOrWhere?\n\nShowLikeOrWhere ::=\n    \"LIKE\" SimpleExpr\n|   \"WHERE\" Expression\n"], "Description": ["SHOW BINDINGS \u8bed\u53e5\u7528\u4e8e\u663e\u793a\u521b\u5efa\u8fc7\u7684 SQL \u7ed1\u5b9a\u7684\u76f8\u5173\u4fe1\u606f\u3002BINDING \u8bed\u53e5\u53ef\u4ee5\u5728 GLOBAL \u6216\u8005 SESSION \u4f5c\u7528\u57df\u5185\u663e\u793a\u6267\u884c\u8ba1\u5212\u7ed1\u5b9a\u3002\u5728\u4e0d\u6307\u5b9a\u4f5c\u7528\u57df\u65f6\uff0c\u9ed8\u8ba4\u7684\u4f5c\u7528\u57df\u4e3a SESSION\u3002"], "Examples": ["CREATE TABLE t1 (\n    id INT NOT NULL PRIMARY KEY auto_increment,\n    b INT NOT NULL,\n    pad VARBINARY(255),\n    INDEX(b)\n   );\nQuery OK, 0 rows affected (0.07 sec)\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM dual;\nQuery OK, 1 row affected (0.01 sec)\nRecords: 1  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 1 row affected (0.00 sec)\nRecords: 1  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 8 rows affected (0.00 sec)\nRecords: 8  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 1000 rows affected (0.04 sec)\nRecords: 1000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (1.74 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (2.15 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nQuery OK, 100000 rows affected (2.64 sec)\nRecords: 100000  Duplicates: 0  Warnings: 0\n\nSELECT SLEEP(1);\n+----------+\n| SLEEP(1) |\n+----------+\n|        0 |\n+----------+\n1 row in set (1.00 sec)\n\nANALYZE TABLE t1;\nQuery OK, 0 rows affected (1.33 sec)\n\nEXPLAIN ANALYZE SELECT * FROM t1 WHERE b = 123;\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| id                            | estRows | actRows | task      | access object        | execution info                                                            | operator info                     | memory         | disk |\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n| IndexLookUp_10                | 583.00  | 297     | root      |                      | time:10.545072ms, loops:2, rpc num: 1, rpc time:398.359\u00b5s, proc keys:297  |                                   | 109.1484375 KB | N/A  |\n| \u251c\u2500IndexRangeScan_8(Build)     | 583.00  | 297     | cop[tikv] | table:t1, index:b(b) | time:0s, loops:4                                                          | range:[123,123], keep order:false | N/A            | N/A  |\n| \u2514\u2500TableRowIDScan_9(Probe)     | 583.00  | 297     | cop[tikv] | table:t1             | time:12ms, loops:4                                                        | keep order:false                  | N/A            | N/A  |\n+-------------------------------+---------+---------+-----------+----------------------+---------------------------------------------------------------------------+-----------------------------------+----------------+------+\n3 rows in set (0.02 sec)\n\nCREATE SESSION BINDING FOR\n    SELECT * FROM t1 WHERE b = 123\n   USING\n    SELECT * FROM t1 IGNORE INDEX (b) WHERE b = 123;\nQuery OK, 0 rows affected (0.00 sec)\n\nEXPLAIN ANALYZE  SELECT * FROM t1 WHERE b = 123;\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n| id                      | estRows   | actRows | task      | access object | execution info                                                                 | operator info      | memory        | disk |\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n| TableReader_7           | 583.00    | 297     | root      |               | time:222.32506ms, loops:2, rpc num: 1, rpc time:222.078952ms, proc keys:301010 | data:Selection_6   | 88.6640625 KB | N/A  |\n| \u2514\u2500Selection_6           | 583.00    | 297     | cop[tikv] |               | time:224ms, loops:298                                                          | eq(test.t1.b, 123) | N/A           | N/A  |\n|   \u2514\u2500TableFullScan_5     | 301010.00 | 301010  | cop[tikv] | table:t1      | time:220ms, loops:298                                                          | keep order:false   | N/A           | N/A  |\n+-------------------------+-----------+---------+-----------+---------------+--------------------------------------------------------------------------------+--------------------+---------------+------+\n3 rows in set (0.22 sec)\n\nSHOW SESSION BINDINGS\\G\n*************************** 1. row ***************************\nOriginal_sql: select * from t1 where b = ?\n    Bind_sql: SELECT * FROM t1 IGNORE INDEX (b) WHERE b = 123\n  Default_db: test\n      Status: using\n Create_time: 2020-05-22 14:38:03.456\n Update_time: 2020-05-22 14:38:03.456\n     Charset: utf8mb4\n   Collation: utf8mb4_0900_ai_ci\n1 row in set (0.00 sec)\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-show-stats-healthy"], "Title": ["SHOW STATS_HEALTHY"], "Feature": ["ShowStatsHealthyStmt ::=\n    \"SHOW\" \"STATS_HEALTHY\" ShowLikeOrWhere?\n\nShowLikeOrWhere ::=\n    \"LIKE\" SimpleExpr\n|   \"WHERE\" Expression\n"], "Description": ["SHOW STATS_HEALTHY \u8bed\u53e5\u53ef\u4ee5\u9884\u4f30\u7edf\u8ba1\u4fe1\u606f\u7684\u51c6\u786e\u5ea6\uff0c\u4e5f\u5c31\u662f\u5065\u5eb7\u5ea6\u3002\u5065\u5eb7\u5ea6\u4f4e\u7684\u8868\u53ef\u80fd\u4f1a\u751f\u6210\u6b21\u4f18\u67e5\u8be2\u6267\u884c\u8ba1\u5212\u3002", "\u53ef\u4ee5\u901a\u8fc7\u6267\u884c ANALYZE \u8bed\u53e5\u6765\u6539\u5584\u8868\u7684\u5065\u5eb7\u5ea6\u3002\u5f53\u8868\u7684\u5065\u5eb7\u5ea6\u4e0b\u964d\u5230\u4f4e\u4e8e tidb_auto_analyze_ratio \u65f6\uff0c\u5219\u4f1a\u81ea\u52a8\u6267\u884c ANALYZE \u8bed\u53e5\u3002", "\u76ee\u524d\uff0cSHOW STATS_HEALTHY \u8bed\u53e5\u8fd4\u56de\u4ee5\u4e0b\u5217\uff1a", "\u5217\u540d\u8bf4\u660eDb_name\u6570\u636e\u5e93\u540dTable_name\u8868\u540dPartition_name\u5206\u533a\u540dHealthy\u5065\u5eb7\u5ea6\uff0c0~100 \u4e4b\u95f4"], "Examples": ["CREATE TABLE t1 (\n id INT NOT NULL PRIMARY KEY auto_increment,\n b INT NOT NULL,\n pad VARBINARY(255),\n INDEX(b)\n);\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM dual;\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nINSERT INTO t1 SELECT NULL, FLOOR(RAND()*1000), RANDOM_BYTES(255) FROM t1 a JOIN t1 b JOIN t1 c LIMIT 100000;\nSELECT SLEEP(1);\nANALYZE TABLE t1;\nSHOW STATS_HEALTHY; # should be 100% healthy\n", "SHOW STATS_HEALTHY;\n", "DELETE FROM t1 WHERE id BETWEEN 101010 AND 201010; # delete about 30% of records\nSHOW STATS_HEALTHY;\n", "SHOW STATS_HEALTHY;\n+---------+------------+----------------+---------+\n| Db_name | Table_name | Partition_name | Healthy |\n+---------+------------+----------------+---------+\n| test    | t1         |                |      50 |\n+---------+------------+----------------+---------+\n1 row in set (0.00 sec)\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-show-stats-histograms"], "Title": ["SHOW STATS_HISTOGRAMS"], "Feature": ["ShowStatsHistogramsStmt ::=\n    \"SHOW\" \"STATS_HISTOGRAMS\" ShowLikeOrWhere?\n\nShowLikeOrWhere ::=\n    \"LIKE\" SimpleExpr\n|   \"WHERE\" Expression\n"], "Description": ["\u4f60\u53ef\u4ee5\u4f7f\u7528 SHOW STATS_HISTOGRAMS \u8bed\u53e5\u67e5\u770b\u901a\u8fc7 ANALYZE \u8bed\u53e5\u6536\u96c6\u7684\u76f4\u65b9\u56fe\u4fe1\u606f\uff0c\u8be5\u5185\u5bb9\u662f\u6570\u636e\u5e93\u5e38\u89c4\u7edf\u8ba1\u4fe1\u606f\u7684\u4e00\u90e8\u5206\u3002", "\u76ee\u524d\uff0cSHOW STATS_HISTOGRAMS \u8bed\u53e5\u8fd4\u56de\u4ee5\u4e0b\u5217\uff1a", "\u5217\u540d\u8bf4\u660eDb_name\u6570\u636e\u5e93\u540dTable_name\u8868\u540dPartition_name\u5206\u533a\u540dColumn_name\u53d6\u51b3\u4e8e Is_index \u503c\uff1aIs_index \u4e3a 0 \u65f6\u663e\u793a\u5217\u540d\uff0c\u4e3a 1 \u65f6\u663e\u793a\u7d22\u5f15\u540dIs_index\u662f\u5426\u662f\u7d22\u5f15\u5217Update_time\u66f4\u65b0\u65f6\u95f4Distinct_count\u4e0d\u540c\u503c\u6570\u91cfNull_countNULL \u7684\u6570\u91cfAvg_col_size\u5217\u5e73\u5747\u957f\u5ea6Correlation\u8be5\u5217\u4e0e\u6574\u578b\u4e3b\u952e\u7684\u76ae\u5c14\u900a\u7cfb\u6570\uff0c\u8868\u793a\u4e24\u5217\u4e4b\u95f4\u7684\u5173\u8054\u7a0b\u5ea6Load_status\u52a0\u8f7d\u72b6\u6001\uff0c\u4f8b\u5982 allEvicted \u548c allLoadedTotal_mem_usage\u603b\u5185\u5b58\u5360\u7528Hist_mem_usage\u5386\u53f2\u5185\u5b58\u5360\u7528Topn_mem_usageTopN \u5185\u5b58\u5360\u7528Cms_mem_usageCMS \u5185\u5b58\u5360\u7528"], "Examples": ["SHOW STATS_HISTOGRAMS;\n", "SHOW STATS_HISTOGRAMS WHERE table_name = 't2';\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-show-stats-locked"], "Title": ["SHOW STATS_LOCKED"], "Feature": ["ShowStatsLockedStmt ::= 'SHOW' 'STATS_LOCKED' ShowLikeOrWhereOpt\n\nShowLikeOrWhereOpt ::= 'LIKE' SimpleExpr | 'WHERE' Expression\n"], "Description": ["SHOW STATS_LOCKED \u8bed\u53e5\u663e\u793a\u7edf\u8ba1\u4fe1\u606f\u88ab\u9501\u5b9a\u7684\u8868\u3002", "\u76ee\u524d\uff0cSHOW STATS_LOCKED \u8bed\u53e5\u8fd4\u56de\u4ee5\u4e0b\u5217\uff1a", "\u5217\u540d\u8bf4\u660eDb_name\u6570\u636e\u5e93\u540dTable_name\u8868\u540dPartition_name\u5206\u533a\u540dStatus\u7edf\u8ba1\u4fe1\u606f\u72b6\u6001\uff0c\u4f8b\u5982 locked"], "Examples": ["mysql> CREATE TABLE t(a INT, b INT);\nQuery OK, 0 rows affected (0.03 sec)\n\nmysql> INSERT INTO t VALUES (1,2), (3,4), (5,6), (7,8);\nQuery OK, 4 rows affected (0.00 sec)\nRecords: 4  Duplicates: 0  Warnings: 0\n\nmysql> ANALYZE TABLE t;\nQuery OK, 0 rows affected, 1 warning (0.02 sec)\n\nmysql> SHOW WARNINGS;\n+-------+------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Level | Code | Message                                                                                                                                                                                                               |\n+-------+------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Note  | 1105 | Analyze use auto adjusted sample rate 1.000000 for table test.t, reason to use this rate is \"Row count in stats_meta is much smaller compared with the row count got by PD, use min(1, 15000/4) as the sample-rate=1\" |\n+-------+------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n", "mysql> LOCK STATS t;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SHOW STATS_LOCKED;\n+---------+------------+----------------+--------+\n| Db_name | Table_name | Partition_name | Status |\n+---------+------------+----------------+--------+\n| test    | t          |                | locked |\n+---------+------------+----------------+--------+\n1 row in set (0.01 sec)\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
{"HTML": ["https://docs.pingcap.com//zh/tidb/stable/sql-statement-show-stats-meta"], "Title": ["SHOW STATS_META"], "Feature": ["ShowStatsMetaStmt ::=\n    \"SHOW\" \"STATS_META\" ShowLikeOrWhere?\n\nShowLikeOrWhere ::=\n    \"LIKE\" SimpleExpr\n|   \"WHERE\" Expression\n"], "Description": ["\u4f60\u53ef\u4ee5\u901a\u8fc7 SHOW STATS_META \u6765\u67e5\u770b\u8868\u7684\u603b\u884c\u6570\u4ee5\u53ca\u4fee\u6539\u7684\u884c\u6570\u7b49\u4fe1\u606f\uff0c\u53ef\u4ee5\u901a\u8fc7 ShowLikeOrWhere \u6765\u7b5b\u9009\u9700\u8981\u7684\u4fe1\u606f\u3002", "\u76ee\u524d SHOW STATS_META \u4f1a\u8f93\u51fa 6 \u5217\uff0c\u5177\u4f53\u5982\u4e0b\uff1a", "\u5217\u540d\u8bf4\u660edb_name\u6570\u636e\u5e93\u540dtable_name\u8868\u540dpartition_name\u5206\u533a\u540dupdate_time\u66f4\u65b0\u65f6\u95f4modify_count\u4fee\u6539\u7684\u884c\u6570row_count\u603b\u884c\u6570", ".css-1weqspv{padding-top:0.5rem;padding-bottom:0.5rem;}.css-1weqspv .MuiAlert-message p{margin-bottom:0px;margin-top:0px;}", "\u6ce8\u610f\u5728 TiDB \u6839\u636e DML \u8bed\u53e5\u81ea\u52a8\u66f4\u65b0\u603b\u884c\u6570\u4ee5\u53ca\u4fee\u6539\u7684\u884c\u6570\u65f6\uff0cupdate_time \u4e5f\u4f1a\u88ab\u66f4\u65b0\uff0c\u56e0\u6b64\u5e76\u4e0d\u80fd\u8ba4\u4e3a update_time \u662f\u6700\u8fd1\u4e00\u6b21\u53d1\u751f Analyze \u7684\u65f6\u95f4\u3002"], "Examples": ["SHOW STATS_META;\n", "SHOW STATS_META WHERE table_name = 't2';\n"], "Category": ["\u7edf\u8ba1\u4fe1\u606f\u548c\u6267\u884c\u8ba1\u5212\u7ba1\u7406"]}
