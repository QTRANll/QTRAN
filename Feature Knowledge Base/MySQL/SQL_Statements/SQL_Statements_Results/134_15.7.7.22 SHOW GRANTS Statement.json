{
    "HTML": [
        "https://dev.mysql.com/doc/refman/8.4/en/show-grants.html"
    ],
    "Title": [
        "15.7.7.22 SHOW GRANTS Statement"
    ],
    "Feature": [
        "SHOW GRANTS\n    [FOR user_or_role\n        [USING role [, role] ...]]\n\nuser_or_role: {\n    user (see Section 8.2.4, \u201cSpecifying Account Names\u201d)\n  | role (see Section 8.2.5, \u201cSpecifying Role Names\u201d.\n}"
    ],
    "Description": [
        "\n        This statement displays the privileges and roles that are\n        assigned to a MySQL user account or role, in the form of\n        GRANT statements that must be\n        executed to duplicate the privilege and role assignments.\n",
        "\n\nNote\n\n\n          To display nonprivilege information for MySQL accounts, use\n          the SHOW CREATE USER statement.\n          See Section\u00a015.7.7.13, \u201cSHOW CREATE USER Statement\u201d.\n\n",
        "\nSHOW GRANTS requires the\n        SELECT privilege for the\n        mysql system schema, except to display\n        privileges and roles for the current user.\n      ",
        "\n        To name the account or role for SHOW\n        GRANTS, use the same format as for the\n        GRANT statement (for example,\n        'jeffrey'@'localhost'):\n      ",
        "Press CTRL+C to copy mysql> SHOW GRANTS FOR 'jeffrey'@'localhost';\n+------------------------------------------------------------------+\n| Grants for jeffrey@localhost                                     |\n+------------------------------------------------------------------+\n| GRANT USAGE ON *.* TO `jeffrey`@`localhost`                      |\n| GRANT SELECT, INSERT, UPDATE ON `db1`.* TO `jeffrey`@`localhost` |\n+------------------------------------------------------------------+",
        "\n        The host part, if omitted, defaults to '%'.\n        For additional information about specifying account and role\n        names, see Section\u00a08.2.4, \u201cSpecifying Account Names\u201d, and\n        Section\u00a08.2.5, \u201cSpecifying Role Names\u201d.\n      ",
        "\n        To display the privileges granted to the current user (the\n        account you are using to connect to the server), you can use any\n        of the following statements:\n      ",
        "Press CTRL+C to copy SHOW GRANTS;\nSHOW GRANTS FOR CURRENT_USER;\nSHOW GRANTS FOR CURRENT_USER();",
        "\n        If SHOW GRANTS FOR CURRENT_USER (or any\n        equivalent syntax) is used in definer context, such as within a\n        stored procedure that executes with definer rather than invoker\n        privileges, the grants displayed are those of the definer and\n        not the invoker.\n      ",
        "\n        In MySQL 8.4 compared to previous series,\n        SHOW GRANTS no longer displays\n        ALL PRIVILEGES in\n        its global-privileges output because the meaning of\n        ALL PRIVILEGES at\n        the global level varies depending on which dynamic privileges\n        are defined. Instead, SHOW GRANTS\n        explicitly lists each granted global privilege:\n      ",
        "Press CTRL+C to copy mysql> SHOW GRANTS FOR 'root'@'localhost';\n+---------------------------------------------------------------------+\n| Grants for root@localhost                                           |\n+---------------------------------------------------------------------+\n| GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD,         |\n| SHUTDOWN, PROCESS, FILE, REFERENCES, INDEX, ALTER, SHOW DATABASES,  |\n| SUPER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION   |\n| SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE,  |\n| ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, CREATE TABLESPACE,      |\n| CREATE ROLE, DROP ROLE ON *.* TO `root`@`localhost` WITH GRANT      |\n| OPTION                                                              |\n| GRANT PROXY ON ''@'' TO `root`@`localhost` WITH GRANT OPTION        |\n+---------------------------------------------------------------------+",
        "\n        Applications that process SHOW\n        GRANTS output should be adjusted accordingly.\n      ",
        "\n        At the global level, GRANT OPTION\n        applies to all granted static global privileges if granted for\n        any of them, but applies individually to granted dynamic\n        privileges. SHOW GRANTS displays\n        global privileges this way:\n",
        "\n\n            One line listing all granted static privileges, if there are\n            any, including WITH GRANT OPTION if\n            appropriate.\n          \n            One line listing all granted dynamic privileges for which\n            GRANT OPTION is granted, if\n            there are any, including WITH GRANT\n            OPTION.\n          \n            One line listing all granted dynamic privileges for which\n            GRANT OPTION is not granted,\n            if there are any, without WITH GRANT\n            OPTION.\n\n",
        "\n        With the optional USING clause,\n        SHOW GRANTS enables you to\n        examine the privileges associated with roles for the user. Each\n        role named in the USING clause must be\n        granted to the user.\n      ",
        "\n        Suppose that user u1 is assigned roles\n        r1 and r2, as follows:\n      ",
        "Press CTRL+C to copy CREATE ROLE 'r1', 'r2';\nGRANT SELECT ON db1.* TO 'r1';\nGRANT INSERT, UPDATE, DELETE ON db1.* TO 'r2';\nCREATE USER 'u1'@'localhost' IDENTIFIED BY 'u1pass';\nGRANT 'r1', 'r2' TO 'u1'@'localhost';",
        "\nSHOW GRANTS without\n        USING shows the granted roles:\n      ",
        "Press CTRL+C to copy mysql> SHOW GRANTS FOR 'u1'@'localhost';\n+---------------------------------------------+\n| Grants for u1@localhost                     |\n+---------------------------------------------+\n| GRANT USAGE ON *.* TO `u1`@`localhost`      |\n| GRANT `r1`@`%`,`r2`@`%` TO `u1`@`localhost` |\n+---------------------------------------------+",
        "\n        Adding a USING clause causes the statement to\n        also display the privileges associated with each role named in\n        the clause:\n      ",
        "Press CTRL+C to copy mysql> SHOW GRANTS FOR 'u1'@'localhost' USING 'r1';\n+---------------------------------------------+\n| Grants for u1@localhost                     |\n+---------------------------------------------+\n| GRANT USAGE ON *.* TO `u1`@`localhost`      |\n| GRANT SELECT ON `db1`.* TO `u1`@`localhost` |\n| GRANT `r1`@`%`,`r2`@`%` TO `u1`@`localhost` |\n+---------------------------------------------+\nmysql> SHOW GRANTS FOR 'u1'@'localhost' USING 'r2';\n+-------------------------------------------------------------+\n| Grants for u1@localhost                                     |\n+-------------------------------------------------------------+\n| GRANT USAGE ON *.* TO `u1`@`localhost`                      |\n| GRANT INSERT, UPDATE, DELETE ON `db1`.* TO `u1`@`localhost` |\n| GRANT `r1`@`%`,`r2`@`%` TO `u1`@`localhost`                 |\n+-------------------------------------------------------------+\nmysql> SHOW GRANTS FOR 'u1'@'localhost' USING 'r1', 'r2';\n+---------------------------------------------------------------------+\n| Grants for u1@localhost                                             |\n+---------------------------------------------------------------------+\n| GRANT USAGE ON *.* TO `u1`@`localhost`                              |\n| GRANT SELECT, INSERT, UPDATE, DELETE ON `db1`.* TO `u1`@`localhost` |\n| GRANT `r1`@`%`,`r2`@`%` TO `u1`@`localhost`                         |\n+---------------------------------------------------------------------+",
        "\n\nNote\n\n\n          A privilege granted to an account is always in effect, but a\n          role is not. The active roles for an account can differ across\n          and within sessions, depending on the value of the\n          activate_all_roles_on_login\n          system variable, the account default roles, and whether\n          SET ROLE has been executed\n          within a session.\n\n",
        "\n        MySQL supports partial revocation of global privileges, such\n        that a global privilege can be restricted from applying to\n        particular schemas (see Section\u00a08.2.12, \u201cPrivilege Restriction Using Partial Revokes\u201d). To\n        indicate which global schema privileges have been revoked for\n        particular schemas, SHOW GRANTS output\n        includes REVOKE statements:\n      ",
        "Press CTRL+C to copy mysql> SET PERSIST partial_revokes = ON;\nmysql> CREATE USER u1;\nmysql> GRANT SELECT, INSERT, DELETE ON *.* TO u1;\nmysql> REVOKE SELECT, INSERT ON mysql.* FROM u1;\nmysql> REVOKE DELETE ON world.* FROM u1;\nmysql> SHOW GRANTS FOR u1;\n+--------------------------------------------------+\n| Grants for u1@%                                  |\n+--------------------------------------------------+\n| GRANT SELECT, INSERT, DELETE ON *.* TO `u1`@`%`  |\n| REVOKE SELECT, INSERT ON `mysql`.* FROM `u1`@`%` |\n| REVOKE DELETE ON `world`.* FROM `u1`@`%`         |\n+--------------------------------------------------+",
        "\nSHOW GRANTS does not display\n        privileges that are available to the named account but are\n        granted to a different account. For example, if an anonymous\n        account exists, the named account might be able to use its\n        privileges, but SHOW GRANTS does\n        not display them.\n      ",
        "\nSHOW GRANTS displays mandatory\n        roles named in the\n        mandatory_roles system variable\n        value as follows:\n",
        "\n\nSHOW GRANTS without a\n            FOR clause displays privileges for the\n            current user, and includes mandatory roles.\n          \nSHOW GRANTS FOR\n            user displays\n            privileges for the named user, and does not include\n            mandatory roles.\n\n",
        "\n        This behavior is for the benefit of applications that use the\n        output of SHOW\n        GRANTS FOR user to\n        determine which privileges are granted explicitly to the named\n        user. Were that output to include mandatory roles, it would be\n        difficult to distinguish roles granted explicitly to the user\n        from mandatory roles.\n      ",
        "\n        For the current user, applications can determine privileges with\n        or without mandatory roles by using SHOW\n        GRANTS or\n        SHOW GRANTS FOR\n        CURRENT_USER, respectively.\n"
    ],
    "Examples": [
        "mysql> SHOW GRANTS FOR 'jeffrey'@'localhost';\n+------------------------------------------------------------------+\n| Grants for jeffrey@localhost                                     |\n+------------------------------------------------------------------+\n| GRANT USAGE ON *.* TO `jeffrey`@`localhost`                      |\n| GRANT SELECT, INSERT, UPDATE ON `db1`.* TO `jeffrey`@`localhost` |\n+------------------------------------------------------------------+",
        "SHOW GRANTS;\nSHOW GRANTS FOR CURRENT_USER;\nSHOW GRANTS FOR CURRENT_USER();",
        "mysql> SHOW GRANTS FOR 'root'@'localhost';\n+---------------------------------------------------------------------+\n| Grants for root@localhost                                           |\n+---------------------------------------------------------------------+\n| GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD,         |\n| SHUTDOWN, PROCESS, FILE, REFERENCES, INDEX, ALTER, SHOW DATABASES,  |\n| SUPER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION   |\n| SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE,  |\n| ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, CREATE TABLESPACE,      |\n| CREATE ROLE, DROP ROLE ON *.* TO `root`@`localhost` WITH GRANT      |\n| OPTION                                                              |\n| GRANT PROXY ON ''@'' TO `root`@`localhost` WITH GRANT OPTION        |\n+---------------------------------------------------------------------+",
        "CREATE ROLE 'r1', 'r2';\nGRANT SELECT ON db1.* TO 'r1';\nGRANT INSERT, UPDATE, DELETE ON db1.* TO 'r2';\nCREATE USER 'u1'@'localhost' IDENTIFIED BY 'u1pass';\nGRANT 'r1', 'r2' TO 'u1'@'localhost';",
        "mysql> SHOW GRANTS FOR 'u1'@'localhost';\n+---------------------------------------------+\n| Grants for u1@localhost                     |\n+---------------------------------------------+\n| GRANT USAGE ON *.* TO `u1`@`localhost`      |\n| GRANT `r1`@`%`,`r2`@`%` TO `u1`@`localhost` |\n+---------------------------------------------+",
        "mysql> SHOW GRANTS FOR 'u1'@'localhost' USING 'r1';\n+---------------------------------------------+\n| Grants for u1@localhost                     |\n+---------------------------------------------+\n| GRANT USAGE ON *.* TO `u1`@`localhost`      |\n| GRANT SELECT ON `db1`.* TO `u1`@`localhost` |\n| GRANT `r1`@`%`,`r2`@`%` TO `u1`@`localhost` |\n+---------------------------------------------+\nmysql> SHOW GRANTS FOR 'u1'@'localhost' USING 'r2';\n+-------------------------------------------------------------+\n| Grants for u1@localhost                                     |\n+-------------------------------------------------------------+\n| GRANT USAGE ON *.* TO `u1`@`localhost`                      |\n| GRANT INSERT, UPDATE, DELETE ON `db1`.* TO `u1`@`localhost` |\n| GRANT `r1`@`%`,`r2`@`%` TO `u1`@`localhost`                 |\n+-------------------------------------------------------------+\nmysql> SHOW GRANTS FOR 'u1'@'localhost' USING 'r1', 'r2';\n+---------------------------------------------------------------------+\n| Grants for u1@localhost                                             |\n+---------------------------------------------------------------------+\n| GRANT USAGE ON *.* TO `u1`@`localhost`                              |\n| GRANT SELECT, INSERT, UPDATE, DELETE ON `db1`.* TO `u1`@`localhost` |\n| GRANT `r1`@`%`,`r2`@`%` TO `u1`@`localhost`                         |\n+---------------------------------------------------------------------+",
        "mysql> SET PERSIST partial_revokes = ON;\nmysql> CREATE USER u1;\nmysql> GRANT SELECT, INSERT, DELETE ON *.* TO u1;\nmysql> REVOKE SELECT, INSERT ON mysql.* FROM u1;\nmysql> REVOKE DELETE ON world.* FROM u1;\nmysql> SHOW GRANTS FOR u1;\n+--------------------------------------------------+\n| Grants for u1@%                                  |\n+--------------------------------------------------+\n| GRANT SELECT, INSERT, DELETE ON *.* TO `u1`@`%`  |\n| REVOKE SELECT, INSERT ON `mysql`.* FROM `u1`@`%` |\n| REVOKE DELETE ON `world`.* FROM `u1`@`%`         |\n+--------------------------------------------------+"
    ],
    "Category": [
        "Database Administration Statements"
    ]
}