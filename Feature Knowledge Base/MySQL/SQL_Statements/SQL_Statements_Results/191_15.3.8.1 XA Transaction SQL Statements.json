{
    "HTML": [
        "https://dev.mysql.com/doc/refman/8.4/en/xa-statements.html"
    ],
    "Title": [
        "15.3.8.1 XA Transaction SQL Statements"
    ],
    "Feature": [
        "XA {START|BEGIN} xid [JOIN|RESUME]\n\nXA END xid [SUSPEND [FOR MIGRATE]]\n\nXA PREPARE xid\n\nXA COMMIT xid [ONE PHASE]\n\nXA ROLLBACK xid\n\nXA RECOVER [CONVERT XID]"
    ],
    "Description": [
        "\n        To perform XA transactions in MySQL, use the following\n        statements:\n      ",
        "\n        For XA\n        START, the JOIN and\n        RESUME clauses are recognized but have no\n        effect.\n      ",
        "\n        For XA\n        END the SUSPEND [FOR MIGRATE]\n        clause is recognized but has no effect.\n      ",
        "\n        Each XA statement begins with the XA keyword,\n        and most of them require an xid\n        value. An xid is an XA transaction\n        identifier. It indicates which transaction the statement applies\n        to. xid values are supplied by the\n        client, or generated by the MySQL server. An\n        xid value has from one to three\n        parts:\n      ",
        "\ngtrid is a global transaction\n        identifier, bqual is a branch\n        qualifier, and formatID is a number\n        that identifies the format used by the\n        gtrid and\n        bqual values. As indicated by the\n        syntax, bqual and\n        formatID are optional. The default\n        bqual value is ''\n        if not given. The default formatID\n        value is 1 if not given.\n      ",
        "\ngtrid and\n        bqual must be string literals, each\n        up to 64 bytes (not characters) long.\n        gtrid and\n        bqual can be specified in several\n        ways. You can use a quoted string ('ab'), hex\n        string (X'6162', 0x6162),\n        or bit value\n        (b'nnnn').\n      ",
        "\nformatID is an unsigned integer.\n      ",
        "\n        The gtrid and\n        bqual values are interpreted in bytes\n        by the MySQL server's underlying XA support routines. However,\n        while an SQL statement containing an XA statement is being\n        parsed, the server works with some specific character set. To be\n        safe, write gtrid and\n        bqual as hex strings.\n      ",
        "\nxid values typically are generated by\n        the Transaction Manager. Values generated by one TM must be\n        different from values generated by other TMs. A given TM must be\n        able to recognize its own xid values\n        in a list of values returned by the\n        XA\n        RECOVER statement.\n      ",
        "\nXA START\n        xid starts an XA\n        transaction with the given xid value.\n        Each XA transaction must have a unique\n        xid value, so the value must not\n        currently be used by another XA transaction. Uniqueness is\n        assessed using the gtrid and\n        bqual values. All following XA\n        statements for the XA transaction must be specified using the\n        same xid value as that given in the\n        XA\n        START statement. If you use any of those statements\n        but specify an xid value that does\n        not correspond to some existing XA transaction, an error occurs.\n      ",
        "\nXA START, XA BEGIN,\n        XA END, XA COMMIT, and\n        XA ROLLBACK statements are not filtered by\n        the default database when the server is running with\n        --replicate-do-db or\n        --replicate-ignore-db.\n      ",
        "\n        One or more XA transactions can be part of the same global\n        transaction. All XA transactions within a given global\n        transaction must use the same gtrid\n        value in the xid value. For this\n        reason, gtrid values must be globally\n        unique so that there is no ambiguity about which global\n        transaction a given XA transaction is part of. The\n        bqual part of the\n        xid value must be different for each\n        XA transaction within a global transaction. (The requirement\n        that bqual values be different is a\n        limitation of the current MySQL XA implementation. It is not\n        part of the XA specification.)\n      ",
        "\n        The XA\n        RECOVER statement returns information for those XA\n        transactions on the MySQL server that are in the\n        PREPARED state. (See\n        Section\u00a015.3.8.2, \u201cXA Transaction States\u201d.) The output includes a row for each\n        such XA transaction on the server, regardless of which client\n        started it.\n      ",
        "\nXA\n        RECOVER requires the\n        XA_RECOVER_ADMIN privilege. This\n        privilege requirement prevents users from discovering the XID\n        values for outstanding prepared XA transactions other than their\n        own. It does not affect normal commit or rollback of an XA\n        transaction because the user who started it knows its XID.\n      ",
        "\nXA\n        RECOVER output rows look like this (for an example\n        xid value consisting of the parts\n        'abc', 'def', and\n        7):\n      ",
        "Press CTRL+C to copy mysql> XA RECOVER;\n+----------+--------------+--------------+--------+\n| formatID | gtrid_length | bqual_length | data   |\n+----------+--------------+--------------+--------+\n|        7 |            3 |            3 | abcdef |\n+----------+--------------+--------------+--------+",
        "\n        The output columns have the following meanings:\n",
        "\n\nformatID is the\n            formatID part of the transaction\n            xid\n\ngtrid_length is the length in bytes of\n            the gtrid part of the\n            xid\n\nbqual_length is the length in bytes of\n            the bqual part of the\n            xid\n\ndata is the concatenation of the\n            gtrid and\n            bqual parts of the\n            xid\n\n",
        "\n        XID values may contain nonprintable characters.\n        XA\n        RECOVER permits an optional CONVERT\n        XID clause so that clients can request XID values in\n        hexadecimal.\n"
    ],
    "Examples": [
        "mysql> XA RECOVER;\n+----------+--------------+--------------+--------+\n| formatID | gtrid_length | bqual_length | data   |\n+----------+--------------+--------------+--------+\n|        7 |            3 |            3 | abcdef |\n+----------+--------------+--------------+--------+"
    ],
    "Category": [
        "Transactional and Locking Statements"
    ]
}