{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822973"], "Title": ["BENCHMARK"], "Feature": ["BENCHMARK(count,expr)\n"], "Description": ["BENCHMARK() 函数重复执行表达式 expr 的 count 次，结果返回 0。对不适当的参数会返回 NULL，例如 NULL 值或 count 为负数。", "expr 只能是标量表达式。BENCHMARK() 可以用于测量标量表达式的运行性能。运行后的报告时间是客户端的运行时间，而不是服务器端的 CPU 时间。"], "Examples": ["obclient> SELECT BENCHMARK(100,AES_ENCRYPT('hello','world'));\n+---------------------------------------------+\n| BENCHMARK(100,AES_ENCRYPT('hello','world')) |\n+---------------------------------------------+\n|                                           0 |\n+---------------------------------------------+\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822968"], "Title": ["LAST_INSERT_ID"], "Feature": ["LAST_INSERT_ID()\n"], "Description": ["返回本 Session 最后一次插入的自增字段值。", "特别地，如果最近一条 INSERT 插入多条记录，LAST_INSERT_ID() 返回第一条记录的自增字段值。"], "Examples": ["obclient> CREATE TABLE t1(c1 INT,c2 INT AUTO_INCREMENT);\nobclient> SELECT LAST_INSERT_ID();\n+------------------+\n| LAST_INSERT_ID() |\n+------------------+\n|                0 |\n+------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822982"], "Title": ["OB_TRANSACTION_ID"], "Feature": ["OB_TRANSACTION_ID()\n"], "Description": ["当前会话处于活跃事务中，则返回所处的事务 ID 整数值，大于 0。", "当前会话如果未处于活跃事务中，返回 0。"], "Examples": ["obclient [test]> BEGIN;\n", "obclient [test]> SELECT OB_TRANSACTION_ID();\n", "+---------------------+\n| OB_TRANSACTION_ID() |\n+---------------------+\n|            14565563 |\n+---------------------+\n1 row in set\n", "obclient [test]> COMMIT;\n", "obclient [test]> SELECT OB_TRANSACTION_ID();\n", "+---------------------+\n| OB_TRANSACTION_ID() |\n+---------------------+\n|                   0 |\n+---------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822981"], "Title": ["OB_VERSION"], "Feature": ["OB_VERSION()\n"], "Description": ["返回当前 OceanBase 数据库的版本信息，字符集为 utf8mb4。"], "Examples": ["obclient> SELECT OB_VERSION();\n+--------------+\n| OB_VERSION() |\n+--------------+\n| 4.1.0.0      |\n+--------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822975"], "Title": ["ROW_COUNT"], "Feature": ["ROW_COUNT()\n"], "Description": ["返回执行的 SQL 语句影响的行数。", "ROW_COUNT 根据不同语句返回不同的值:", "DDL 语句：返回 0。", "除 SELECT 外的 DML 语句：影响的行数。", "特别地，UPDATE 语句会返回实际影响的行数。", "SELECT 语句：如果 SELECT 语句的执行结果是一个集合，则返回 -1，如果 SELECT 语句影响到了行的状态，则返回被影响的行数。", "例如，SELECT .... INTO 语句会返回插入的行数。"], "Examples": ["obclient> INSERT INTO t VALUES(1),(2),(3);\nQuery OK, 3 rows affected (0.02 sec)\nRecords: 3  Duplicates: 0  Warnings: 0\n\nobclient> SELECT ROW_COUNT();\n+-------------+\n| ROW_COUNT() |\n+-------------+\n|           3 |\n+-------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822978"], "Title": ["SCHEMA"], "Feature": ["SCHEMA()\n"], "Description": ["返回当前 Schema 名称。此函数是 DATABASE() 的同义词。"], "Examples": ["obclient> SELECT SCHEMA();\n+----------+\n| SCHEMA() |\n+----------+\n| test     |\n+----------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822972"], "Title": ["SESSION_USER"], "Feature": ["SESSION_USER()\n"], "Description": ["返回当前的用户名与主机名，返回值使用的字符集为 utf8mb4。", "该函数是 USER() 的同义词。"], "Examples": ["obclient> SELECT SESSION_USER();\n+---------------------+\n| SESSION_USER()      |\n+---------------------+\n| root@100.0.0.1 |\n+---------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822970"], "Title": ["SYSTEM_USER"], "Feature": ["SYSTEM_USER()\n"], "Description": ["返回当前的用户名与主机名，该函数是 USER() 的同义词。"], "Examples": ["obclient> SELECT SYSTEM_USER();\n+---------------------+\n| SYSTEM_USER()       |\n+---------------------+\n| root@xxx.xx.xxx.xxx |\n+---------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822976"], "Title": ["USER"], "Feature": ["USER()\n"], "Description": ["返回当前的用户名与主机名，返回值使用的字符集为 utf8mb4。"], "Examples": ["obclient> SELECT USER();\n+---------------------+\n| USER()              |\n+---------------------+\n| root@xxx.xx.xxx.xxx |\n+---------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822967"], "Title": ["CHARSET"], "Feature": ["CHARSET(str)\n"], "Description": ["返回字符串 str 使用的字符集。"], "Examples": ["obclient> SELECT CHARSET(\"oceanbaase\");\n+-----------------------+\n| CHARSET(\"oceanbaase\") |\n+-----------------------+\n| utf8mb4               |\n+-----------------------+\n1 row in set\n\nobclient> SELECT CHARSET(CONVERT(\"oceanbase\" USING binary));\n+--------------------------------------------+\n| CHARSET(CONVERT(\"oceanbase\" USING binary)) |\n+--------------------------------------------+\n| binary                                     |\n+--------------------------------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822984"], "Title": ["VERSION"], "Feature": ["VERSION()\n"], "Description": ["返回当前 OceanBase 数据库与 MySQL 兼容的版本号，字符集为 utf8mb4。"], "Examples": ["obclient> SELECT VERSION();\n+---------------------------+\n| VERSION()                 |\n+---------------------------+\n| 5.7.25-OceanBase-v4.1.0.0 |\n+---------------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822974"], "Title": ["COERCIBILITY"], "Feature": ["COERCIBILITY(str)\n"], "Description": ["返回字符串 str 在多语言排序时字符序的优先级。", "相同字符集的两个变量在进行比较时，按字符序作为规则。但不同字符集的两个变量时，就需要规定不同字符集间的优先级。例如以下语句：", "obclient> SELECT c1 FROM t WHERE c1 = 'Y';\n", "如果 c1 与 'Y' 使用相同的字符序，则不会产生歧义。但如果表 t 在 table_option 指定了其他的字符序，或系统变量 collation_connection 使用了不同的字符序，则在比较时使用的哪种字符序，取决于两种字符序的优先级。", "各类字符序的优先级如下表所示，值越小优先级越高。", "\n\n\n取值\n描述\n例子\n\n\n\n\n0\n显式指定的字符序\n显式 COLLATE 子句。\n\n\n1\n无字符序\n不同字符序字符串的连接。\n\n\n2\n隐式指定的字符序\n列值、系统参数或变量。\n\n\n3\n系统常数\n系统函数例如 USER() 函数的返回值。\n\n\n4\n可降级值\n文字字符串。\n\n\n5\n数字型值\n数值或时间值。\n\n\n6\n可忽略的值\nNULL 或结果为 NULL 的表达式。\n\n\n", "OceanBase 数据库使用 Coercibility 值和以下规则来解决歧义：", "Coercibility 越小，优先级越高。", "如果比较的双方具有相同的 Coercibility 的排序规则，则使用以下补充规则：", "\n如果两种字符集都是 Unicode 或都不是 Unicode，字符序不同则返回错误。\n如果一侧字符集使用了 Unicode，另一侧字符集不是 Unicode，则 Unicode 的一侧具有更高的优先级。例如以下语句不会返回错误： obclient> SELECT CONCAT(t1.utf8_column, t2.gbk_column) FROM t1,t2;\n\n对于相同字符集，但字符序分别是 _bin 与 a_ci 或 _cs，则使用 _bin 字符序。\n", "如果两种字符集都是 Unicode 或都不是 Unicode，字符序不同则返回错误。", "如果一侧字符集使用了 Unicode，另一侧字符集不是 Unicode，则 Unicode 的一侧具有更高的优先级。例如以下语句不会返回错误：", "obclient> SELECT CONCAT(t1.utf8_column, t2.gbk_column) FROM t1,t2;\n", "对于相同字符集，但字符序分别是 _bin 与 a_ci 或 _cs，则使用 _bin 字符序。"], "Examples": ["obclient> SELECT COERCIBILITY('oceanbase' COLLATE utf8mb4_bin);\n+-----------------------------------------------+\n| COERCIBILITY('oceanbase' COLLATE utf8mb4_bin) |\n+-----------------------------------------------+\n|                                             0 |\n+-----------------------------------------------+\n1 row in set\n\nobclient> SELECT COERCIBILITY('oceanbase');\n+---------------------------+\n| COERCIBILITY('oceanbase') |\n+---------------------------+\n|                         4 |\n+---------------------------+\n1 row in set\n\nobclient> SELECT COERCIBILITY(user());\n+----------------------+\n| COERCIBILITY(user()) |\n+----------------------+\n|                    3 |\n+----------------------+\n1 row in set\n\nobclient> SELECT COERCIBILITY(1000);\n+--------------------+\n| COERCIBILITY(1000) |\n+--------------------+\n|                  5 |\n+--------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822971"], "Title": ["COLLATION"], "Feature": ["COLLATION(str)\n"], "Description": ["返回字符串 str 的字符序。", "您可以通过 SHOW COLLATION 语句查看 OceanBase 数据库支持的字符序。"], "Examples": ["obclient> SELECT COLLATION(\"oceanbase\");\n+------------------------+\n| COLLATION(\"oceanbase\") |\n+------------------------+\n| utf8mb4_general_ci     |\n+------------------------+\n1 row in set\n\nobclient> SELECT COLLATION(\"oceanbase\" COLLATE utf8mb4_bin);\n+--------------------------------------------+\n| COLLATION(\"oceanbase\" COLLATE utf8mb4_bin) |\n+--------------------------------------------+\n| utf8mb4_bin                                |\n+--------------------------------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822980"], "Title": ["CONNECTION_ID"], "Feature": ["CONNECTION_ID()\n"], "Description": ["该函数返回当前会话的 Client Session ID，该 ID 是会话在客户端中的唯一标识。"], "Examples": ["obclient [(none)]> SELECT CONNECTION_ID() AS Client_Session_ID;\n", "+-------------------+\n| Client_Session_ID |\n+-------------------+\n|        3221488032 |\n+-------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822969"], "Title": ["CURRENT_ROLE"], "Feature": ["CURRENT_ROLE()\n"], "Description": ["该函数用于查看当前用户在当前会话中被激活的角色。如果查询结果为 NONE，则表示当前用户没有处于激活状态的角色，只有处于激活状态的角色的权限才能被用户使用。"], "Examples": ["obclient [(none)]> SELECT CURRENT_ROLE();\n", "+-----------------------------+\n| CURRENT_ROLE()              |\n+-----------------------------+\n| `role002`@`%`,`role001`@`%` |\n+-----------------------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822985"], "Title": ["CURRENT_USER"], "Feature": ["CURRENT_USER()\n"], "Description": ["OceanBase 数据库通过用户名与主机名的组合定义登录账户，该函数返回登录账户名称的字符串，使用的字符集为 utf8mb4。", "在登录 OceanBase 数据库时，OceanBase 数据库会按用户名与主机名进行匹配，例如，创建两个用户 testUser@192.168.%.% 与 testUser@192.%.%.%，则可以在 mysql.USER 表中查询到以下用户：", "obclient> SELECT USER,HOST FROM mysql.USER ORDER BY USER,HOST;\n+------------+----------------+\n| user       | host           |\n+------------+----------------+\n...\n| testUser       | 192.%.%.%      |\n| testUser       | 192.168.%.%    |\n...\n+------------+----------------+\n", "在 MySQL 租户中，不同用户名与主机名的组合可以拥有不同的权限，在匹配时也会被识别为不同的用户。例如，您可以为 testUser@192.168.%.% 授予 SELECT 与 UPDATE 权限，为 testUser@192.%.%.% 授予 SELECT 权限。", "obclient> GRANT SELECT,UPDATE ON *.* TO testUser@192.168.%.% IDENTIFIED BY '******';\nobclient> GRANT SELECT ON *.* TO testUser@192.%.%.% IDENTIFIED BY '******';\n", "使用 test 用户登录到 OceanBase 数据库后，执行 CURRENT_USER()。结果如下所示。", "[admin@hostname ~]$ obclient -hxxx.xx.xxx.xxx -Pxxxx -utest***@xxx#xxx -p\nobclient> SELECT CURRENT_USER();\n+----------------------+\n| CURRENT_USER()       |\n+----------------------+\n| testUser@192.168.%.% |\n+----------------------+\n1 row in set\n", "将 test@192.168.%.% 删除后，再次使用 test 用户连接 OceanBase 数据库，并执行 CURRENT_USER()。结果如下所示。", "obclient> DROP USER 'testUser'@'192.168.%.%';\nobclient> \\q\nBye\n\n[admin@hostname ~]$ obclient -hxxx.xx.xxx.xxx -Pxxxx -utest***@xxx#xxx -p\nobclient> SELECT CURRENT_USER();\n+----------------------+\n| CURRENT_USER()       |\n+----------------------+\n| testUser@192.%.%.%   |\n+----------------------+\n1 row in set\n"], "Examples": ["obclient> SELECT CURRENT_USER();\n+----------------+\n| CURRENT_USER() |\n+----------------+\n| root@%         |\n+----------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822983"], "Title": ["DATABASE"], "Feature": ["DATABASE()\n"], "Description": ["返回当前数据库名称，字符集为 utf8mb4。", "如果没有通过 USE 语句指定数据库，则返回 NULL。"], "Examples": ["obclient> SELECT DATABASE();\n+------------+\n| DATABASE() |\n+------------+\n| oceanbase  |\n+------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822979"], "Title": ["FOUND_ROWS"], "Feature": ["FOUND_ROWS()\n"], "Description": ["一个 SELECT 语句可能包含一个 LIMIT 子句，用来限制数据库服务器端返回客户端的行数。在某些情况下，不需要再次运行该语句而得知在没有 LIMIT 时到底该语句返回了多少行。我们可以在 SELECT 语句中选择使用 SQL_CALC_FOUND_ROWS，然后调用 FOUND_ROWS() 函数，获取该语句在没有 LIMIT 时返回的行数。", "如下例所示：", "obclient> SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name\n     WHERE id > 100 LIMIT 10;\nobclient> SELECT FOUND_ROWS();\n", "第二个 SELECT 语句返回一个数字，表示在没有 LIMIT 子句的情况下，第一个 SELECT 语句返回了多少行。如果上述的 SELECT 语句不使用 SQL_CALC_FOUND_ROWS 选项，使用 LIMIT 和不使用 LIMIT 时，FOUND_ROWS() 可能会返回不同的结果。", "通过 FOUND_ROWS() 函数返回的有效行数是瞬时的，并且不能越过 SELECT SQL_CALC_FOUND_ROWS 语句后面的语句。如果您后续还需要用到这个值，就需要将其保存。", "如下例所示：", "obclient> SELECT SQL_CALC_FOUND_ROWS * FROM ... ;\nobclient> SET @rows = FOUND_ROWS();\n", "假如您正在使用 SQL_CALC_FOUND_ROWS，系统必须计算出在全部结果集合中有多少行。尽管如此，这也还是比不用 LIMIT 而再次运行查询要快，原因是结果集合不需要被发送到客户端。", "SQL_CALC_FOUND_ROWS 和 FOUND_ROWS() 在当您希望限制一个查询返回的行数时是很有用的，同时还能不需要再次运行查询就可以确定全部结果集合中的行数。例如提供页式显示的 Web 脚本时，该显示包含显示搜索结果其他部分的页的链接。使用 FOUND_ROWS() 可以确定剩下的结果需要多少其他的页。", "SQL_CALC_FOUND_ROWS 和 FOUND_ROWS() 的应用对于 UNION 查询比对于简单 SELECT 语句更为复杂，原因是在 UNION 中，LIMIT 可能会出现在多个位置。它可能适用于 UNION 中的独立的 SELECT 语句，或是整个的 UNION 结果。", "SQL_CALC_FOUND_ROWS 对于 UNION 的期望结果是在没有全局的 LIMIT 的条件下，返回应有的行数。SQL_CALC_FOUND_ROWS 和 UNION 一同使用的条件是：", "SQL_CALC_FOUND_ROWS 关键词必须出现在 UNION 的第一个 SELECT 中。", "FOUND_ROWS() 的值只有在使用 UNION ALL 时才是精确的。如果使用不带 ALL 的 UNION，则会发生两次删除，而 FOUND_ROWS() 的值是近似的。", "如果 UNION 中没有出现 LIMIT，则 SQL_CALC_FOUND_ROWS 被忽略，返回临时表中所创建的用来处理 UNION 的行数。"], "Examples": ["obclient> SELECT SQL_CALC_FOUND_ROWS * FROM t2;\nobclient> SELECT FOUND_ROWS();\n+--------------+\n| FOUND_ROWS() |\n+--------------+\n|            3 |\n+--------------+\n1 row in set\n"], "Category": ["Information Functions"]}
{"HTML": ["https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000000822977"], "Title": ["ICU_VERSION"], "Feature": ["ICU_VERSION()\n"], "Description": ["该函数返回支持正则表达式操作的 ICU 库的版本。 OceanBase 数据库使用 International Components for Unicode (ICU) 实现对正则表达式的支持，ICU 提供完整的 Unicode 支持并且是多字节安全的。"], "Examples": ["obclient> SELECT ICU_VERSION();\n+---------------+\n| ICU_VERSION() |\n+---------------+\n| 69.1          |\n+---------------+\n1 row in set\n"], "Category": ["Information Functions"]}
