{
    "HTML": [
        "https://www.oceanbase.com/docs/enterprise-oceanbase-database-cn-1000000001053530"
    ],
    "Title": [
        "CREATE TABLEGROUP"
    ],
    "Feature": [
        "CREATE TABLEGROUP tablegroup_name [tablegroup_option];\n\ntablegroup_option:\n   SHARDING = 'NONE' | 'PARTITION' | 'ADAPTIVE'\n"
    ],
    "Description": [
        "该语句用来创建表组。",
        "表组主要用于创建一组具有相同分布特征的表，具有相同分布特征的表在进行连接操作时，可以在本地进行，避免跨节点的数据请求。",
        "创建表组需要当前用户拥有全局 CREATE 权限。",
        "\n\n\n参数\n描述\n\n\n\n\ntablegroup_name\n表组名称，最长 64 个字符，字符只能有大小写英文字母，数字和下划线，而且必须以字母或下划线开头，并且不能使用 OceanBase 数据库的关键字。如果要创建的表组名称已存在，并且没有指定 IF NOT EXISTS，则会出现错误。\n\n\nSHARDING\n表组的属性。如果不指定 SHARDING 属性，则默认创建 ADAPTIVE 的表组。SHARDING 取值如下： \n      \nNONE：对加入表组的表没有限制。\nPARTITION：加入表组的表对应的一级分区，需要与表组中所有表的一级分区的分区方式一致，包括分区类型、分区个数和分区值。\nADAPTIVE：加入表组的表对应的一级分区和二级分区，需要与表组中所有表的一级分区和二级分区的分区方式一致，包括分区类型、分区个数和分区值。加入表组中的表必须只能为同一类分区表（一级分区表或者二级分区表）\n相同的分区方式包括： \n      \n分区类型相同（例如都是 Hash+Range 分区）。\n如果是 Hash 分区，要求引用的列数相同，并且分区个数相同。\n如果是 Range 分区，要求引用的列数相同，并且分区数相同，Range 分割点相同。\n对于二级分区，根据其分区类型，要求和上述一致。\n\n\n"
    ],
    "Examples": [
        "obclient> CREATE TABLEGROUP myTableGroup1;\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE myt1 (c1 INT, c2 INT ) TABLEGROUP = myTableGroup1;\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE myt2 (c1 INT, c2 INT ) TABLEGROUP = myTableGroup1;\nQuery OK, 0 rows affected\n",
        "obclient> CREATE TABLEGROUP tblgroup1 SHARDING = 'NONE';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1 (col INT) TABLEGROUP = tblgroup1;\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2 (col1 BIGINT PRIMARY KEY,col2 VARCHAR(50)) TABLEGROUP = tblgroup1\n    PARTITION BY LIST(col1)\n      (PARTITION p0 VALUES IN (1, 2, 3),\n       PARTITION p1 VALUES IN (5, 6),\n       PARTITION p2 VALUES IN (DEFAULT)\n       );\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl3(col1 INT,col2 varchar(50)) TABLEGROUP = tblgroup1\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST COLUMNS(col2)\n   (PARTITION p0 VALUES in (01)\n      (SUBPARTITION mp0 VALUES in ('01'),\n       SUBPARTITION mp1 VALUES in ('02'),\n       SUBPARTITION mp2 VALUES in ('03')),\n    PARTITION p1 VALUES in (02)\n      (SUBPARTITION mp3 VALUES in ('01'),\n       SUBPARTITION mp4 VALUES in ('02'),\n       SUBPARTITION mp5 VALUES in ('03'))\n     );\nQuery OK, 0 rows affected\n",
        "obclient> CREATE TABLEGROUP tblgroup2 SHARDING = 'PARTITION';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1 (col1 BIGINT PRIMARY KEY,col2 VARCHAR(50)) TABLEGROUP = tblgroup2\n    PARTITION BY LIST(col1)\n      (PARTITION p0 VALUES IN (1, 2, 3),\n       PARTITION p1 VALUES IN (5, 6),\n       PARTITION p2 VALUES IN (DEFAULT)\n      );\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2 (col1 BIGINT PRIMARY KEY,col2 VARCHAR(50)) TABLEGROUP = tblgroup2\n  PARTITION BY LIST(col1)\n    (PARTITION p0 VALUES IN (1, 2, 3),\n     PARTITION p1 VALUES IN (5, 6),\n     PARTITION p2 VALUES IN (DEFAULT)\n     );\nQuery OK, 0 rows affected\n",
        "obclient> CREATE TABLEGROUP tblgroup3 SHARDING = 'PARTITION';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1 (col INT) TABLEGROUP = tblgroup3;\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2 (col1 BIGINT PRIMARY KEY,col2 VARCHAR(50)) TABLEGROUP = tblgroup3\n    PARTITION BY LIST(col1)\n      (PARTITION p0 VALUES IN (1, 2, 3),\n       PARTITION p1 VALUES IN (5, 6),\n       PARTITION p2 VALUES IN (DEFAULT)\n       );\nERROR 4179 (HY000): not all tables are non-partitioned or partitioned, add table to tablegroup not allowed\n",
        "obclient> CREATE TABLEGROUP tblgroup4 SHARDING = 'PARTITION';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1 (col1 BIGINT PRIMARY KEY,col2 VARCHAR(50)) TABLEGROUP = tblgroup4\n    PARTITION BY LIST(col1)\n      (PARTITION p0 VALUES IN (1, 2, 3),\n       PARTITION p1 VALUES IN (5, 6),\n       PARTITION p2 VALUES IN (DEFAULT)\n       );\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2 (col1 BIGINT PRIMARY KEY,col2 VARCHAR(50)) TABLEGROUP = tblgroup4\n    PARTITION BY LIST(col1)\n      (PARTITION p0 VALUES IN (1, 2, 3),\n       PARTITION p1 VALUES IN (5, 7),\n       PARTITION p2 VALUES IN (DEFAULT)\n       );\nERROR 4179 (HY000): list_part partition value not equal, add table to tablegroup not allowed\n",
        "obclient> CREATE TABLEGROUP tblgroup5 SHARDING = 'ADAPTIVE';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1(col1 INT,col2 VARCHAR(50)) TABLEGROUP = tblgroup5\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST COLUMNS(col2)\n      (PARTITION p0 VALUES in (01)\n         (SUBPARTITION mp0 VALUES in ('01'),\n          SUBPARTITION mp1 VALUES in ('02'),\n          SUBPARTITION mp2 VALUES in ('03')),\n       PARTITION p1 VALUES in (02)\n         (SUBPARTITION mp3 VALUES in ('01'),\n          SUBPARTITION mp4 VALUES in ('02'),\n          SUBPARTITION mp5 VALUES in ('03'))\n      );\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2(col1 INT,col2 VARCHAR(50)) TABLEGROUP = tblgroup5\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST COLUMNS(col2)\n      (PARTITION p0 VALUES in (01)\n         (SUBPARTITION mp0 VALUES in ('01'),\n          SUBPARTITION mp1 VALUES in ('02'),\n          SUBPARTITION mp2 VALUES in ('03')),\n       PARTITION p1 VALUES in (02)\n         (SUBPARTITION mp3 VALUES in ('01'),\n          SUBPARTITION mp4 VALUES in ('02'),\n          SUBPARTITION mp5 VALUES in ('03'))\n       );\nQuery OK, 0 rows affected\n",
        "obclient> CREATE TABLEGROUP tblgroup6 SHARDING = 'ADAPTIVE';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1 (col int) TABLEGROUP = tblgroup6;\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2(col1 INT,col2 VARCHAR(50)) TABLEGROUP = tblgroup6\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST COLUMNS(col2)\n      (PARTITION p0 VALUES in (01)\n         (SUBPARTITION mp0 VALUES in ('01'),\n          SUBPARTITION mp1 VALUES in ('02'),\n          SUBPARTITION mp2 VALUES in ('03')\n       ),\n      PARTITION p1 VALUES in (02)\n         (SUBPARTITION mp3 VALUES in ('01'),\n          SUBPARTITION mp4 VALUES in ('02'),\n          SUBPARTITION mp5 VALUES in ('03'))\n       );\nERROR 4179 (HY000): not all tables are non-partitioned or partitioned, add table to tablegroup not allowed\n",
        "obclient> CREATE TABLEGROUP tblgroup7 SHARDING = 'ADAPTIVE';\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl1(col1 INT,col2 VARCHAR(50)) TABLEGROUP = tblgroup7\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST COLUMNS(col2)\n      (PARTITION p0 VALUES in (01)\n        (SUBPARTITION mp0 VALUES in ('01'),\n          SUBPARTITION mp1 VALUES in ('02'),\n          SUBPARTITION mp2 VALUES in ('03')\n          ),\n       PARTITION p1 VALUES in (02)\n          (SUBPARTITION mp3 VALUES in ('01'),\n           SUBPARTITION mp4 VALUES in ('02'),\n           SUBPARTITION mp5 VALUES in ('03'))\n      );\nQuery OK, 0 rows affected\n\nobclient> CREATE TABLE tbl2(col1 INT,col2 VARCHAR(50)) TABLEGROUP = tblgroup7\n    PARTITION BY LIST(col1) SUBPARTITION BY LIST COLUMNS(col2)\n      (PARTITION p0 VALUES in (01)\n         (SUBPARTITION mp0 VALUES in ('01'),\n          SUBPARTITION mp1 VALUES in ('02')),\n       PARTITION p1 VALUES in (02)\n         (SUBPARTITION mp3 VALUES in ('01'),\n          SUBPARTITION mp4 VALUES in ('02'))\n       );\nERROR 4179 (HY000): subpartition num not matched, add table to tablegroup not allowed\n"
    ],
    "Category": [
        "No Category"
    ]
}