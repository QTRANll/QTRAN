{
    "HTML": [
        "https://dev.mysql.com/doc/refman/8.0/en/built-in-function-reference.html"
    ],
    "Title": [
        "14.1 Built-In Function and Operator Reference"
    ],
    "Name": "JSON_SEARCH()",
    "Description": [
        "\nJSON_SEARCH(json_doc,\n          one_or_all,\n          search_str[,\n          escape_char[,\n          path] ...])\n",
        "\n          Returns the path to the given string within a JSON document.\n          Returns NULL if any of the\n          json_doc,\n          search_str, or\n          path arguments are\n          NULL; no path\n          exists within the document; or\n          search_str is not found. An error\n          occurs if the json_doc argument is\n          not a valid JSON document, any path\n          argument is not a valid path expression,\n          one_or_all is not\n          'one' or 'all', or\n          escape_char is not a constant\n          expression.\n        ",
        "\n          The one_or_all argument affects the\n          search as follows:\n",
        "\n\n'one': The search terminates after the\n              first match and returns one path string. It is undefined\n              which match is considered first.\n            \n'all': The search returns all matching\n              path strings such that no duplicate paths are included. If\n              there are multiple strings, they are autowrapped as an\n              array. The order of the array elements is undefined.\n\n",
        "\n          Within the search_str search string\n          argument, the % and _\n          characters work as for the LIKE\n          operator: % matches any number of\n          characters (including zero characters), and\n          _ matches exactly one character.\n        ",
        "\n          To specify a literal % or\n          _ character in the search string, precede\n          it by the escape character. The default is\n          \\ if the\n          escape_char argument is missing or\n          NULL. Otherwise,\n          escape_char must be a constant that\n          is empty or one character.\n        ",
        "\n          For more information about matching and escape character\n          behavior, see the description of\n          LIKE in\n          Section\u00a014.8.1, \u201cString Comparison Functions and Operators\u201d. For escape\n          character handling, a difference from the\n          LIKE behavior is that the escape\n          character for JSON_SEARCH()\n          must evaluate to a constant at compile time, not just at\n          execution time. For example, if\n          JSON_SEARCH() is used in a\n          prepared statement and the\n          escape_char argument is supplied\n          using a ? parameter, the parameter value\n          might be constant at execution time, but is not at compile\n          time.\n        ",
        "\nsearch_str and\n          path are always interpreted as\n          utf8mb4 strings, regardless of their actual encoding. This is\n          a known issue which is fixed in MySQL 8.0.24 (\n\n\n\n          Bug #32449181).\n        ",
        "Press CTRL+C to copy mysql> SET @j = '[\"abc\", [{\"k\": \"10\"}, \"def\"], {\"x\":\"abc\"}, {\"y\":\"bcd\"}]';\n\nmysql> SELECT JSON_SEARCH(@j, 'one', 'abc');\n+-------------------------------+\n| JSON_SEARCH(@j, 'one', 'abc') |\n+-------------------------------+\n| \"$[0]\"                        |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', 'abc');\n+-------------------------------+\n| JSON_SEARCH(@j, 'all', 'abc') |\n+-------------------------------+\n| [\"$[0]\", \"$[2].x\"]            |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', 'ghi');\n+-------------------------------+\n| JSON_SEARCH(@j, 'all', 'ghi') |\n+-------------------------------+\n| NULL                          |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10');\n+------------------------------+\n| JSON_SEARCH(@j, 'all', '10') |\n+------------------------------+\n| \"$[1][0].k\"                  |\n+------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$');\n+-----------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$') |\n+-----------------------------------------+\n| \"$[1][0].k\"                             |\n+-----------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*]');\n+--------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$[*]') |\n+--------------------------------------------+\n| \"$[1][0].k\"                                |\n+--------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$**.k');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$**.k') |\n+---------------------------------------------+\n| \"$[1][0].k\"                                 |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k');\n+-------------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k') |\n+-------------------------------------------------+\n| \"$[1][0].k\"                                     |\n+-------------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1]');\n+--------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$[1]') |\n+--------------------------------------------+\n| \"$[1][0].k\"                                |\n+--------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]');\n+-----------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]') |\n+-----------------------------------------------+\n| \"$[1][0].k\"                                   |\n+-----------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]') |\n+---------------------------------------------+\n| \"$[2].x\"                                    |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%a%');\n+-------------------------------+\n| JSON_SEARCH(@j, 'all', '%a%') |\n+-------------------------------+\n| [\"$[0]\", \"$[2].x\"]            |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%');\n+-------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%') |\n+-------------------------------+\n| [\"$[0]\", \"$[2].x\", \"$[3].y\"]  |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]') |\n+---------------------------------------------+\n| \"$[0]\"                                      |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]') |\n+---------------------------------------------+\n| \"$[2].x\"                                    |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]') |\n+---------------------------------------------+\n| NULL                                        |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[1]');\n+-------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', '', '$[1]') |\n+-------------------------------------------+\n| NULL                                      |\n+-------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[3]');\n+-------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', '', '$[3]') |\n+-------------------------------------------+\n| \"$[3].y\"                                  |\n+-------------------------------------------+",
        "\n          For more information about the JSON path syntax supported by\n          MySQL, including rules governing the wildcard operators\n          * and **, see\n          JSON Path Syntax.\n        "
    ],
    "Reference HTML": "https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-search",
    "Feature": [
        "JSON_SEARCH(json_doc,\n          one_or_all,\n          search_str[,\n          escape_char[,\n          path] ...])"
    ],
    "Examples": [
        "mysql> SET @j = '[\"abc\", [{\"k\": \"10\"}, \"def\"], {\"x\":\"abc\"}, {\"y\":\"bcd\"}]';\n\nmysql> SELECT JSON_SEARCH(@j, 'one', 'abc');\n+-------------------------------+\n| JSON_SEARCH(@j, 'one', 'abc') |\n+-------------------------------+\n| \"$[0]\"                        |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', 'abc');\n+-------------------------------+\n| JSON_SEARCH(@j, 'all', 'abc') |\n+-------------------------------+\n| [\"$[0]\", \"$[2].x\"]            |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', 'ghi');\n+-------------------------------+\n| JSON_SEARCH(@j, 'all', 'ghi') |\n+-------------------------------+\n| NULL                          |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10');\n+------------------------------+\n| JSON_SEARCH(@j, 'all', '10') |\n+------------------------------+\n| \"$[1][0].k\"                  |\n+------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$');\n+-----------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$') |\n+-----------------------------------------+\n| \"$[1][0].k\"                             |\n+-----------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*]');\n+--------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$[*]') |\n+--------------------------------------------+\n| \"$[1][0].k\"                                |\n+--------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$**.k');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$**.k') |\n+---------------------------------------------+\n| \"$[1][0].k\"                                 |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k');\n+-------------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k') |\n+-------------------------------------------------+\n| \"$[1][0].k\"                                     |\n+-------------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1]');\n+--------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$[1]') |\n+--------------------------------------------+\n| \"$[1][0].k\"                                |\n+--------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]');\n+-----------------------------------------------+\n| JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]') |\n+-----------------------------------------------+\n| \"$[1][0].k\"                                   |\n+-----------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]') |\n+---------------------------------------------+\n| \"$[2].x\"                                    |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%a%');\n+-------------------------------+\n| JSON_SEARCH(@j, 'all', '%a%') |\n+-------------------------------+\n| [\"$[0]\", \"$[2].x\"]            |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%');\n+-------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%') |\n+-------------------------------+\n| [\"$[0]\", \"$[2].x\", \"$[3].y\"]  |\n+-------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]') |\n+---------------------------------------------+\n| \"$[0]\"                                      |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]') |\n+---------------------------------------------+\n| \"$[2].x\"                                    |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]');\n+---------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]') |\n+---------------------------------------------+\n| NULL                                        |\n+---------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[1]');\n+-------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', '', '$[1]') |\n+-------------------------------------------+\n| NULL                                      |\n+-------------------------------------------+\n\nmysql> SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[3]');\n+-------------------------------------------+\n| JSON_SEARCH(@j, 'all', '%b%', '', '$[3]') |\n+-------------------------------------------+\n| \"$[3].y\"                                  |\n+-------------------------------------------+"
    ],
    "Category": [
        "Built-In Functions and Operators",
        "JSON Functions"
    ],
    "EffectiveSQLsRefined": [
        "SELECT JSON_SEARCH(@j, 'one', 'abc');",
        "SELECT JSON_SEARCH(@j, 'all', 'abc');",
        "SELECT JSON_SEARCH(@j, 'all', 'ghi');",
        "SELECT JSON_SEARCH(@j, 'all', '10');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*]');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$**.k');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1]');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]');",
        "SELECT JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]');",
        "SELECT JSON_SEARCH(@j, 'all', '%a%');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[1]');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[3]');"
    ],
    "EffectiveSQLsGenerated": [],
    "EffectiveSQLsGeneratedCosts": [],
    "EffectiveSQLsGeneratedErrors": [],
    "EffectiveSQLs": [
        "SELECT JSON_SEARCH(@j, 'one', 'abc');",
        "SELECT JSON_SEARCH(@j, 'all', 'abc');",
        "SELECT JSON_SEARCH(@j, 'all', 'ghi');",
        "SELECT JSON_SEARCH(@j, 'all', '10');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*]');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$**.k');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[*][0].k');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1]');",
        "SELECT JSON_SEARCH(@j, 'all', '10', NULL, '$[1][0]');",
        "SELECT JSON_SEARCH(@j, 'all', 'abc', NULL, '$[2]');",
        "SELECT JSON_SEARCH(@j, 'all', '%a%');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[0]');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[2]');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', NULL, '$[1]');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[1]');",
        "SELECT JSON_SEARCH(@j, 'all', '%b%', '', '$[3]');"
    ]
}