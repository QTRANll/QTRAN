{
    "HTML": [
        "https://dev.mysql.com/doc/refman/8.0/en/built-in-function-reference.html"
    ],
    "Title": [
        "14.1 Built-In Function and Operator Reference"
    ],
    "Name": "JSON_MERGE_PATCH()",
    "Description": [
        "\nJSON_MERGE_PATCH(json_doc,\n          json_doc[,\n          json_doc] ...)\n",
        "\n          Performs an\n          RFC\n          7396 compliant merge of two or more JSON documents and\n          returns the merged result, without preserving members having\n          duplicate keys. Raises an error if at least one of the\n          documents passed as arguments to this function is not valid.\n",
        "\n\nNote\n\n\n            For an explanation and example of the differences between\n            this function and JSON_MERGE_PRESERVE(),\n            see\n            JSON_MERGE_PATCH() compared with JSON_MERGE_PRESERVE().\n\n",
        "\nJSON_MERGE_PATCH() performs a merge as\n          follows:\n",
        "\n\n              If the first argument is not an object, the result of the\n              merge is the same as if an empty object had been merged\n              with the second argument.\n            \n              If the second argument is not an object, the result of the\n              merge is the second argument.\n            \n              If both arguments are objects, the result of the merge is\n              an object with the following members:\n\n\n\n                  All members of the first object which do not have a\n                  corresponding member with the same key in the second\n                  object.\n                \n                  All members of the second object which do not have a\n                  corresponding key in the first object, and whose value\n                  is not the JSON null literal.\n                \n                  All members with a key that exists in both the first\n                  and the second object, and whose value in the second\n                  object is not the JSON null\n                  literal. The values of these members are the results\n                  of recursively merging the value in the first object\n                  with the value in the second object.\n\n\n\n",
        "\n          For additional information, see\n          Normalization, Merging, and Autowrapping of JSON Values.\n        ",
        "Press CTRL+C to copy mysql> SELECT JSON_MERGE_PATCH('[1, 2]', '[true, false]');\n+---------------------------------------------+\n| JSON_MERGE_PATCH('[1, 2]', '[true, false]') |\n+---------------------------------------------+\n| [true, false]                               |\n+---------------------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('{\"name\": \"x\"}', '{\"id\": 47}');\n+-------------------------------------------------+\n| JSON_MERGE_PATCH('{\"name\": \"x\"}', '{\"id\": 47}') |\n+-------------------------------------------------+\n| {\"id\": 47, \"name\": \"x\"}                         |\n+-------------------------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('1', 'true');\n+-------------------------------+\n| JSON_MERGE_PATCH('1', 'true') |\n+-------------------------------+\n| true                          |\n+-------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('[1, 2]', '{\"id\": 47}');\n+------------------------------------------+\n| JSON_MERGE_PATCH('[1, 2]', '{\"id\": 47}') |\n+------------------------------------------+\n| {\"id\": 47}                               |\n+------------------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('{ \"a\": 1, \"b\":2 }',\n     >     '{ \"a\": 3, \"c\":4 }');\n+-----------------------------------------------------------+\n| JSON_MERGE_PATCH('{ \"a\": 1, \"b\":2 }','{ \"a\": 3, \"c\":4 }') |\n+-----------------------------------------------------------+\n| {\"a\": 3, \"b\": 2, \"c\": 4}                                  |\n+-----------------------------------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('{ \"a\": 1, \"b\":2 }','{ \"a\": 3, \"c\":4 }',\n     >     '{ \"a\": 5, \"d\":6 }');\n+-------------------------------------------------------------------------------+\n| JSON_MERGE_PATCH('{ \"a\": 1, \"b\":2 }','{ \"a\": 3, \"c\":4 }','{ \"a\": 5, \"d\":6 }') |\n+-------------------------------------------------------------------------------+\n| {\"a\": 5, \"b\": 2, \"c\": 4, \"d\": 6}                                              |\n+-------------------------------------------------------------------------------+",
        "\n          You can use this function to remove a member by specifying\n          null as the value of the same member in the\n          second argument, as shown here:\n        ",
        "Press CTRL+C to copy mysql> SELECT JSON_MERGE_PATCH('{\"a\":1, \"b\":2}', '{\"b\":null}');\n+--------------------------------------------------+\n| JSON_MERGE_PATCH('{\"a\":1, \"b\":2}', '{\"b\":null}') |\n+--------------------------------------------------+\n| {\"a\": 1}                                         |\n+--------------------------------------------------+",
        "\n          This example shows that the function operates in a recursive\n          fashion; that is, values of members are not limited to\n          scalars, but rather can themselves be JSON documents:\n        ",
        "Press CTRL+C to copy mysql> SELECT JSON_MERGE_PATCH('{\"a\":{\"x\":1}}', '{\"a\":{\"y\":2}}');\n+----------------------------------------------------+\n| JSON_MERGE_PATCH('{\"a\":{\"x\":1}}', '{\"a\":{\"y\":2}}') |\n+----------------------------------------------------+\n| {\"a\": {\"x\": 1, \"y\": 2}}                            |\n+----------------------------------------------------+",
        "\nJSON_MERGE_PATCH() is supported in MySQL\n          8.0.3 and later.\n        ",
        "JSON_MERGE_PATCH() compared with JSON_MERGE_PRESERVE().\u00a0\n            The behavior of JSON_MERGE_PATCH() is the\n            same as that of\n            JSON_MERGE_PRESERVE(), with\n            the following two exceptions:\n",
        "\n\nJSON_MERGE_PATCH() removes any member\n              in the first object with a matching key in the second\n              object, provided that the value associated with the key in\n              the second object is not JSON null.\n            \n              If the second object has a member with a key matching a\n              member in the first object,\n              JSON_MERGE_PATCH()\nreplaces the value in the first\n              object with the value in the second object, whereas\n              JSON_MERGE_PRESERVE()\nappends the second value to the first\n              value.\n\n",
        "\n          This example compares the results of merging the same 3 JSON\n          objects, each having a matching key \"a\",\n          with each of these two functions:\n        ",
        "Press CTRL+C to copy mysql> SET @x = '{ \"a\": 1, \"b\": 2 }',\n     >     @y = '{ \"a\": 3, \"c\": 4 }',\n     >     @z = '{ \"a\": 5, \"d\": 6 }';\n\nmysql> SELECT  JSON_MERGE_PATCH(@x, @y, @z)    AS Patch,\n    ->         JSON_MERGE_PRESERVE(@x, @y, @z) AS Preserve\\G\n*************************** 1. row ***************************\n   Patch: {\"a\": 5, \"b\": 2, \"c\": 4, \"d\": 6}\nPreserve: {\"a\": [1, 3, 5], \"b\": 2, \"c\": 4, \"d\": 6}"
    ],
    "Reference HTML": "https://dev.mysql.com/doc/refman/8.0/en/json-modification-functions.html#function_json-merge-patch",
    "Feature": [
        "JSON_MERGE_PATCH(json_doc,\n          json_doc[,\n          json_doc] ...)"
    ],
    "Examples": [
        "mysql> SELECT JSON_MERGE_PATCH('[1, 2]', '[true, false]');\n+---------------------------------------------+\n| JSON_MERGE_PATCH('[1, 2]', '[true, false]') |\n+---------------------------------------------+\n| [true, false]                               |\n+---------------------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('{\"name\": \"x\"}', '{\"id\": 47}');\n+-------------------------------------------------+\n| JSON_MERGE_PATCH('{\"name\": \"x\"}', '{\"id\": 47}') |\n+-------------------------------------------------+\n| {\"id\": 47, \"name\": \"x\"}                         |\n+-------------------------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('1', 'true');\n+-------------------------------+\n| JSON_MERGE_PATCH('1', 'true') |\n+-------------------------------+\n| true                          |\n+-------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('[1, 2]', '{\"id\": 47}');\n+------------------------------------------+\n| JSON_MERGE_PATCH('[1, 2]', '{\"id\": 47}') |\n+------------------------------------------+\n| {\"id\": 47}                               |\n+------------------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('{ \"a\": 1, \"b\":2 }',\n     >     '{ \"a\": 3, \"c\":4 }');\n+-----------------------------------------------------------+\n| JSON_MERGE_PATCH('{ \"a\": 1, \"b\":2 }','{ \"a\": 3, \"c\":4 }') |\n+-----------------------------------------------------------+\n| {\"a\": 3, \"b\": 2, \"c\": 4}                                  |\n+-----------------------------------------------------------+\n\nmysql> SELECT JSON_MERGE_PATCH('{ \"a\": 1, \"b\":2 }','{ \"a\": 3, \"c\":4 }',\n     >     '{ \"a\": 5, \"d\":6 }');\n+-------------------------------------------------------------------------------+\n| JSON_MERGE_PATCH('{ \"a\": 1, \"b\":2 }','{ \"a\": 3, \"c\":4 }','{ \"a\": 5, \"d\":6 }') |\n+-------------------------------------------------------------------------------+\n| {\"a\": 5, \"b\": 2, \"c\": 4, \"d\": 6}                                              |\n+-------------------------------------------------------------------------------+",
        "mysql> SELECT JSON_MERGE_PATCH('{\"a\":1, \"b\":2}', '{\"b\":null}');\n+--------------------------------------------------+\n| JSON_MERGE_PATCH('{\"a\":1, \"b\":2}', '{\"b\":null}') |\n+--------------------------------------------------+\n| {\"a\": 1}                                         |\n+--------------------------------------------------+",
        "mysql> SELECT JSON_MERGE_PATCH('{\"a\":{\"x\":1}}', '{\"a\":{\"y\":2}}');\n+----------------------------------------------------+\n| JSON_MERGE_PATCH('{\"a\":{\"x\":1}}', '{\"a\":{\"y\":2}}') |\n+----------------------------------------------------+\n| {\"a\": {\"x\": 1, \"y\": 2}}                            |\n+----------------------------------------------------+",
        "mysql> SET @x = '{ \"a\": 1, \"b\": 2 }',\n     >     @y = '{ \"a\": 3, \"c\": 4 }',\n     >     @z = '{ \"a\": 5, \"d\": 6 }';\n\nmysql> SELECT  JSON_MERGE_PATCH(@x, @y, @z)    AS Patch,\n    ->         JSON_MERGE_PRESERVE(@x, @y, @z) AS Preserve\\G\n*************************** 1. row ***************************\n   Patch: {\"a\": 5, \"b\": 2, \"c\": 4, \"d\": 6}\nPreserve: {\"a\": [1, 3, 5], \"b\": 2, \"c\": 4, \"d\": 6}"
    ],
    "Category": [
        "Built-In Functions and Operators",
        "JSON Functions"
    ],
    "EffectiveSQLsRefined": [
        "SELECT JSON_MERGE_PATCH('[1, 2]', '[true, false]');"
    ],
    "EffectiveSQLsGenerated": [],
    "EffectiveSQLsGeneratedCosts": [],
    "EffectiveSQLsGeneratedErrors": [],
    "EffectiveSQLs": [
        "SELECT JSON_MERGE_PATCH('[1, 2]', '[true, false]');"
    ]
}